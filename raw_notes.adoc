// Include a Table of Contents on the left hand side.
:toc: left
// ":icons: font" is needed for adminition and callout icons.
:icons: font

= Raw notes

== Up to 2020-08-25

* basic research: AWS, Terraform, CockroachDB deployment, OmniOS
** find / build a simple load generator. (will use "cockroach workload" for now)
** calculate how much it will cost to run a small cluster on AWS for a while.
*** three instances
*** Prometheus
*** Grafana
*** 1-3 load generators
* Successfully used Terraform to provision a 3-node CockroachDB cluster on AWS, using OmniOS and https://sysmgr.org/~jclulow/tmp/cockroach.tar.gz[Joshua's CRDB binaries].  You need to manually run `cockroach init --insecure --host ...` on one of them to get the cluster to come up.

=== Planning notes

Will use AWS to start playing with it.

* Will use https://www.cockroachlabs.com/docs/v20.1/topology-basic-production["Basic Production"].
* Make sure to use the https://www.cockroachlabs.com/docs/v20.1/cockroach-start#locality[locality] flag if we end up using different AZs.

In terms of https://www.cockroachlabs.com/docs/v20.1/recommended-production-settings#software[host operating system]:

> We recommend running a glibc-based Linux distribution and Linux kernel version from the last 5 years, such as Ubuntu, Red Hat Enterprise Linux (RHEL), CentOS, or Container-Optimized OS.

We'll try illumos to see how it goes.

https://www.cockroachlabs.com/docs/v20.1/recommended-production-settings#basic-hardware-recommendations[Basic hardware recommendations]: for each vCPU, it's recommended to expect 4 GiB of RAM, 60 GiB of storage, 500 disk IOPS, and 30 MBps of disk I/O.  Recommend at least 2 vCPUS and better would be 4 vCPUs per node.  Price out a 4-vCPU node?  Avoid "burstable" or "shared-core".  Use "m" (general-purpose) or "c" ("compute-optimized").  Recommend "c5d" for use with EBS using SSD instances.

If we want to save cost significantly, we should shut down these instances when we don't actively need them to be running.  If we use "c5d", we'll probably lose local storage.  This would be a good reason to use "c5" with an EBS volume.  The perf will presumably be worse, but presumably not pathologically so, and we're more interested in ballpark / pathological figures than absolute best perf.  We probably don't need fantastic performance out of the gate to do basic fault testing, but we also don't want to see pathological behavior (e.g., due to starvation).

Adam points out that illumos won't currently run on "c5" or other generations that require ENA networking, so we should stick with "c4" for now.

https://www.cockroachlabs.com/docs/v20.1/recommended-production-settings#connection-pooling[Recommended connection pool size:] 2 * core count + ssd count.  It's unclear if this is a server-side figure or a client-side figure or what?

Considerations for later:

- file descriptor limit
- cache size

Load generators: There are several https://www.cockroachlabs.com/docs/v20.1/cockroach-workload.html[workload options].  Note that the workloads have a `--tolerate-errors` option.  Most promising seem like "bank", "kv", "tpcc", "ycsb".

In terms of images, it looks like https://omniosce.org/setup/aws[AWS AMI images are available for recent versions of OmniOS].

=== Calculating cost on AWS

Requirements:

* Use "c4large" for db and load generators (see above).
* Grafana recommends 256 MiB memory + 1 CPU.
* Prometheus seems to want 3 GiB of memory.
* Do this all in "us-west-2" (cheaper than some other regions)

Let's put Grafana + Prometheus in a single t3.medium instance.

https://calculator.aws/#/estimate?id=16e6ed9a0102c9e24880a0175edaa9eef88ac8c9[Estimate:]

* 6 "c4large" instances (3xCRDB + 3xload generators) with 60 GiB "gp2" storage each: $474 / month
* 1 "t3.medium" instance (Prometheus + Grafana): $36 / month

Total: $510 / month.  If we only use it for, say, 10 hours a week, that's only $30 / month.


== 2020-08-26

* fixed bugs in Terraform config
** cockroachdb SMF service was disabled on reboot (was using `svcadm enable -t`)
** `terraform apply` could fail if the VPC subnet wound up in us-west-2d because our instance types aren't supported there
** it would be convenient if the instance names didn't have spaces
** it would be convenient if there were a single tag for all of our instances so
we could select them without relying on my specific key
* successful cold start
* lots of NTP issues: see GitHub issue #1.  These appear to be mitigated.

== 2020-08-27

Summary of the day:

* Ran into a lot of issues with NTP.  Installed Chrony.  The issues appear
  resolved.
* Got workloads running.  Exercised a bunch of the options for duration, ramp-up time, percent reads, etc.

Details follow.

* Three databases, 1 load generator.  Each load generator can only be pointed at one database, so this shouldn't be too heavy for the whole cluster, but let's see what happens.
* I'm going to start with the "kv" worklaod.

 /cockroachdb/bin/cockroach workload init kv postgres://root@192.168.1.152:26257?sslmode=disable
/cockroachdb/bin/cockroach workload run kv --histograms kv-histograms-$(date +%FT%TZ).out postgres://root@192.168.1.152:26257?sslmode=disable

Things to play with:

--ramp
--max-rate
--max-ops
--read-percent
--tolerate-errors

I let that run for about 25-30 minutes.  End of the run:

[source,text]
----
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
 1661.0s        0          830.6          802.5      4.7      6.3      9.4     24.1 write
 1662.0s        0          827.3          802.5      4.7      6.3      9.4     16.8 write
 1663.0s        0          820.8          802.5      4.7      6.6     12.1     17.8 write
 1664.0s        0          808.1          802.5      4.7      6.6     11.5     16.8 write
 1665.0s        0          789.3          802.5      5.0      7.1      9.4     16.3 write
 1666.0s        0          764.4          802.5      5.0      7.3     11.0     16.8 write
 1667.0s        0          806.0          802.5      5.0      6.8      8.9     15.7 write
 1668.0s        0          803.0          802.5      4.7      6.6     11.0     23.1 write
 1669.0s        0          787.9          802.5      5.0      6.8      8.4     18.9 write
 1670.0s        0          809.2          802.5      5.0      6.8      9.4     12.1 write
 1671.0s        0          799.8          802.5      5.0      7.1      9.4     15.7 write
 1672.0s        0          838.8          802.5      4.7      6.3     11.0     19.9 write
 1673.0s        0          840.4          802.5      4.5      6.3     11.0     16.3 write
 1674.0s        0          806.9          802.5      4.7      7.3      9.4     14.7 write
^CHighest sequence written: 1343922. Can be passed as --write-seq=R1343922 to the next run.

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
 1674.6s        0        1343922          802.5      5.0      4.7      6.8     11.5     65.0  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
 1674.6s        0        1343922          802.5      5.0      4.7      6.8     11.5     65.0
----

This created kv-histograms-2020-08-27T17:29:16Z.out.

I'm going to try it again for a few minutes to see if the initial spike in latency is one-time or not.

[source,text]
----
$ /cockroachdb/bin/cockroach workload run kv --histograms kv-histograms-$(date +%FT%TZ).out --duration 5m postgres://root@192.168.1.152:26257?sslmode=disable 

...

Highest sequence written: 239288. Can be passed as --write-seq=R239288 to the next run.

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
  300.0s        0         239284          797.6      5.0      4.7      6.8     12.6    125.8  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
  300.0s        0         239284          797.6      5.0      4.7      6.8     12.6    125.8
----

This created kv-histograms-2020-08-27T17:59:04Z.out.

The latency spike up front happened again.

Let's try out the --max-rate option to place a cap at 500 operations.  (I accidentally used --max-ops first, which exited quickly!)

cockroachdb@ip-192-168-1-192:~$ /cockroachdb/bin/cockroach workload run kv --histograms kv-histograms-$(date +%FT%TZ).out --max-rate 500 postgres://root@192.168.1.152:26257?sslmode=disable 

That seemed to work reasonably well.  There are a ton of metrics in the Admin UI dashboard!

[source,text]
----
_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
  362.6s        0         178192          491.4      4.0      3.7      5.8     12.1     88.1  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
  362.6s        0         178192          491.4      4.0      3.7      5.8     12.1     88.1  
----

This created kv-histograms-2020-08-27T18:08:37Z.out.

Let's try `--ramp`.  I used 30s first, but that's too fast to really see the effect.  I'm going to try this again with 5m.

[source,text]
----
cockroachdb@ip-192-168-1-192:~$ /cockroachdb/bin/cockroach workload run kv --histograms kv-histograms-$(date +%FT%TZ).out --ramp=5m --max-rate 700 postgres://root@192.168.1.152:26257?sslmode=disable 
...
^CHighest sequence written: 588373. Can be passed as --write-seq=R588373 to the next run.

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
  655.4s        0         435950          665.2      4.7      4.5      6.6     11.5     56.6  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
  655.4s        0         435950          665.2      4.7      4.5      6.6     11.5     56.6
----

This created kv-histograms-2020-08-27T18:18:53Z.out.  That seemed to do what I expected -- ramped up over several minutes and capped around 700.

The histogram file looks to be per-second histograms.

I want to throw some reads into the mix, but one of the nodes has become "suspect" because its clock is too far off.  I'm starting to get:

[source,text]
----
W200827 18:41:29.280504 1064 kv/kvserver/replica_range_lease.go:555  [n2,s2,r10/
3:/Table/1{4-5}] can't determine lease status of (n2,s2):3 due to node liveness
error: node not in the liveness table
(1) attached stack trace
  | github.com/cockroachdb/cockroach/pkg/kv/kvserver.init
  |     /ws/cockroach/gopath/src/github.com/cockroachdb/cockroach/pkg/kv/kvserve
r/node_liveness.go:44
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5420
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5415
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5415
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5415
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5415
  | runtime.main
  |     /opt/go/1.14.4/src/runtime/proc.go:190
  | runtime.goexit
  |     /opt/go/1.14.4/src/runtime/asm_amd64.s:1373
----

Two of them have gone into maintenance now.

Several hours later: I've built and deployed chrony to these boxes to see if
this goes better.  Let's go ahead and run that mixed workload I wanted to do
next.

[source,text]
----
$ /cockroachdb/bin/cockroach workload run kv --histograms kv-histograms-$(date +%FT%TZ).out --read-percent=30 --ramp=5m postgres://root@192.168.1.152:26257?sslmode=disable 
...
^CNumber of reads that didn't return any results: 2.
Highest sequence written: 2550079. Can be passed as --write-seq=R2550079 to the next run.

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
 3465.5s        0        1028361          296.7      2.0      1.9      3.0      5.0     67.1  read

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
 3465.5s        0        2395944          691.4      4.9      4.7      6.8     11.0    201.3  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
 3465.5s        0        3424305          988.1      4.0      4.5      6.6     10.0    201.3
----

I let this run for about an hour.  This created kv-histograms-2020-08-27T22:54:19Z.out.  Note that this file has two lines per second -- one for reads and ones for writes.

The clocks are consistently within 1ms of each other now (!).  This workload is running well.

At about 2020-08-27T23:16Z, I activated statement diagnostics for the UPSERT that this thing is running to see what it does.  This produced a bundle that was 23 bytes (0 bytes downloaded, for some reason).  This looks like this bug fixed in https://www.cockroachlabs.com/docs/releases/v20.2.0-alpha.3.html[v20.2.0-alpha.3]:

> Fixed a bug causing the raw trace file collected inside a statement diagnostics bundle to be sometimes empty when the cluster setting sql.trace.txn.enable_threshold was in use. #50914

although in our case `sql.trace.txn.enable_threshold` is 0 (disabled).  Maybe not the same issue.

== 2020-08-31

Went through:

* https://www.cockroachlabs.com/docs/v20.1/learn-cockroachdb-sql.html[Learn CockroachDB SQL] (this was just basic SQL)
** https://www.cockroachlabs.com/docs/v20.1/developer-guide-overview.html[Developer Guide]
** Skipped exercises under https://www.cockroachlabs.com/docs/v20.1/deploy-a-test-cluster.html[Test deployment] -- these were too basic or exercised K8s behavior.
** Skimmed the https://www.cockroachlabs.com/docs/v20.1/performance.html[Performance Guide]
** https://www.cockroachlabs.com/docs/v20.1/monitoring-and-alerting.html[Prometheus stuff]
** Skimmed https://www.cockroachlabs.com/docs/v20.1/configure-replication-zones.html[Replication Zones]
** https://www.cockroachlabs.com/docs/v20.1/manage-long-running-queries.html[Long-running queries]
** Read through https://www.cockroachlabs.com/docs/v20.1/remove-nodes.html[Decommision nodes]
** Read through https://www.cockroachlabs.com/docs/v20.1/disaster-recovery.html[disaster recovery]
** Skimmed through https://www.cockroachlabs.com/docs/v20.1/troubleshooting-overview.html[Troubleshooting section]

Exercised replication + rebalancing tutorial:

* Started with a cluster with 65 ranges: internal data + some poking around with the "movr" dataset.
* That's 65 ranges with replication factor 3 divided across 3 nodes = 65 replicas per node (confirmed).
* Started a fourth node: expect ~48 replicas per node (65 ranges times replication factor 3 divided by 4 nodes)
* Final state: between 46 - 50 replicas per node.  Stopped slightly before I expected, but well within reasonable.

Now I want to decommission that fourth node.

```
/cockroachdb/bin/cockroach node decommission 4 --insecure --host 192.168.1.46
...
  id | is_live | replicas | is_decommissioning |   membership   | is_draining
-----+---------+----------+--------------------+----------------+--------------
   4 |  true   |        0 |        true        | decommissioned |    false
(1 row)

No more data reported on target nodes. Please verify cluster health before removing the nodes.
```

For good measure, I drained it before disabling it:

```
root@ip-192-168-1-46:~# /cockroachdb/bin/cockroach node drain --insecure --host 192.168.1.46
node is draining... remaining: 1
node is draining... remaining: 0 (complete)
ok
root@ip-192-168-1-46:~# svcadm disable -s cockroachdb
root@ip-192-168-1-46:~#
```

Then I removed it with Terraform.  (Fortunately, just decrementing the count of db nodes caused Terraform to want to destroy this one and not some other one.)

After a few minutes, the UI reports the node as decommissioned.

---

I'm now switching over to fleshing out more of the deployment: Prometheus + Grafana for better situational awareness, plus haproxy so I can do more interesting load testing like shutting off individual nodes.

---

Prometheus:
* building from scratch for illumos
** need: golang, nodejs, yarn
*** added OmniOSce "extra" publisher
*** installed golang 1.14 (plus add path)
*** installed nodejs 12
*** used `npm install -g yarn` (plus add path)
*** needed to install gnu-tar and put that onto PATH before tar
*** needed to set TMPDIR=/var/tmp because /tmp isn't big enough.
*** needed to build `promu` first because the build doesn't have a binary for that but doesn't handle that case.  See https://elatov.github.io/2020/04/monitoring-other-targets-with-prometheus/#compiling-node_exporter-on-omnios[here].  Worked around as described there, by pulling `promu` source.
*** also needed to apply patch below to client_unix.go.

[source,text]
----
diff --git a/vendor/github.com/docker/docker/client/client_unix.go b/vendor/github.com/docker/docker/client/client_unix.go
index 178ff6740..69fb1b48f 100644
--- a/vendor/github.com/docker/docker/client/client_unix.go
+++ b/vendor/github.com/docker/docker/client/client_unix.go
@@ -1,4 +1,4 @@
-// +build linux freebsd openbsd netbsd darwin dragonfly
+// +build linux freebsd openbsd netbsd darwin dragonfly illumos

 package client // import "github.com/docker/docker/client"
----

Grafana: huge pain, but ultimately:
* need at least 8G of memory (!)
* install yarn, node, go, etc.
* git clone
* git checkout # tag you want
* `rm -rf packages/grafana-e2e`
* `yarn install --pure-lockfile` or whatever
* `yarn start` or whatever (might be able to use `go run build.go build-frontend` instead)
* `go run build.go build`
* `go run build.go pkg-archive`
* (appeared to be missing `make build` (for `make build-js`) there?)

== 2020-09-01

* Set up elastic IP for my dev zone.  This looks like about $44/year if my instance were off the whole year, which seems reasonable.
* Set up manual deployment of Prometheus and Grafana in "mon" VM
** use user called "mon" for Prometheus and Grafana
** /export/home/mon/{bin,etc,grafana,var/prometheus/data}

So it will look like:

[source,text]
----
/export/home/mon/bin/prometheus
/export/home/mon/etc/prometheus.yml
/export/home/mon/var/prometheus/data/...
/export/home/mon/grafana/
----

(note: I changed this on 9/2 to separate Prometheus and Grafana into their own directories because they seem more oriented around that approach and it's not clear there's much value in following the traditional system package manager layout here.)

prometheus to be invoked as: prometheus --storage.tsdb.path=... --config.file=... &
refresh: kill -HUP?

NOTE: cockroachdb on one node went into maintenance on boot again because of clock issues.  This time, chrony had definitely finished starting before cockroachdb went into maintenance.  Is this going to be a serious problem?

I did eventually get Prometheus set up pulling from CockroachDB.

I tried running Grafana, but found that my build was busted in a way that only fails when you go to configure a data source in the web UI.

Finally got that fixed and updated instructions above.

== 2020-09-02 and 2020-09-03

Working to automate the deployment of Prometheus and Grafana to a dev zone.  This included a bunch of changes:

* refactored "vminit" directory and created a janky build that creates a "common" tarball for chrony and role-specific tarballs for the database/loadgen and monitoring VMs.
** refactored directory structure of "mon" VM from what's above
** built "fetcher" command to fetch asset from S3
** updated Terraform to configure IAM to support this
** updated vminit.sh to use "fetcher" and reflect the rest of these changes
* incorporated Prometheus
** with config to automatically discover EC2 instances in this project
** with config to scrape Grafana too
** updated Terraform to configure IAM to support this
* incorporated Grafana
** including our Prometheus data source
** including stock Prometheus, Grafana, and CockroachDB dashboards.  This involved manually fixing them to remove DS_PROMETHEUS/DS_NAME inputs -- see the README in that directory.
* various improvements:
** more useful hostnames for VMs (though this is not currently persistent)
** created "env.sh" file with various useful aliases

== 2020-09-04

* added Prometheus node_exporter (see [prometheus/node_exporter#1836](https://github.com/prometheus/node_exporter/issues/1836))
* built out a Grafana dashboard to show key metrics.  Discovered [prometheus/node_exporter#1837](https://github.com/prometheus/node_exporter/issues/1837).

Still, I think I'm just about ready to do some more serious testing.

== 2020-09-08

Summary:

* Switched to Joshua's OmniOS image running his metadata agent: AMI
  `ami-012f34b61b75182e8`.
* Updated Terraform config to deploy much larger root disks.
* Spent some time automating disk and zpool expansion to match provisioned size before realizing that Josh's image already does this.
* Recreated dashboard from Friday
* Ran a bunch of tests:
** ycsb workload: increasing levels of concurrency
** The workload appeared largely bottlenecked on one db node, so I went to experiment with a much larger DB and adding splits.
** I ran into a lot of different errors trying to make this work.  I'm not sure what the root cause really was except stuff being really busy?
** The "kv" workload might be easier to run and just as useful a next step.

Around 9am PT, ran:

[source,text]
----
$ cockroach workload run ycsb --concurrency=1 --drop --histograms histograms-ycsbA-c=1-"$(date +%FT%TZ)".out --tolerate-errors --workload A
----

I let this run for an hour.

Around 1pm PT, I ran:

[source,text]
----
$ cockroach workload run ycsb --concurrency=1 --drop --histograms histograms-ycsbA-c=1-"$(date +%FT%TZ)".out --tolerate-errors --workload A --duration 5m
----

Around 1:16PM, I'm running:

[source,text]
----
$ cockroach workload run ycsb --concurrency=2 --drop --histograms histograms-ycsbA-c=2-"$(date +%FT%TZ)".out --tolerate-errors --workload A --duration 5m
----

Around 1:23PM, I'm running:

[source,text]
----
$ cockroach workload run ycsb --concurrency=4 --drop --histograms histograms-ycsbA-c=4-"$(date +%FT%TZ)".out --tolerate-errors --workload A --duration 5m
----

Around 1:34PM, I'm running:

[source,text]
----
$ cockroach workload run ycsb --concurrency=8 --drop --histograms histograms-ycsbA-c=8-"$(date +%FT%TZ)".out --tolerate-errors --workload A --duration 5m
----

Around 1:42PM, I'm running:

[source,text]
----
$ cockroach workload run ycsb --concurrency=16 --drop --histograms histograms-ycsbA-c=16-"$(date +%FT%TZ)".out --tolerate-errors --workload A --duration 5m
----

At this point, db0 CPUs exceeded 90% CPU utilization.  It's busier than all the other nodes, by a lot.  Let's see what happens if we go further.

Around 1:51PM:

[source,text]
----
$ cockroach workload run ycsb --concurrency=32 --drop --histograms histograms-ycsbA-c=32-"$(date +%FT%TZ)".out --tolerate-errors --workload A --duration 5m
----

It's actually degraded okay at this point, by which I mean that throughput did actually increase and p95/p99 didn't get extremely bad.  I note that in the CRDB Admin UI, nearly all of the queries have hit the "n1" store today.  Only during this last workload did we see any queries hit another store, and it was n3.  Maybe CRDB is dynamically splitting by load?

Note that during this workload is where we start seeing replica errors and more "not leaseholder" errors than before.

Digging further into AdminUI, this database is only 128 MiB, with 4 ranges.  It's not shocking that it's not that distributed.

What if we go further?

At 1:58PM PT:

[source,text]
----
$ cockroach workload run ycsb --concurrency=64 --drop --histograms histograms-ycsbA-c=64-"$(date +%FT%TZ)".out --tolerate-errors --workload A --duration 5m
----

The results look similar to the previous one.  Throughput is less consistent, but hasn't gotten below the point where it was previously consistent.  We did seem to see some SQL 'exec_error's, but I don't see them in the client.  This graph in Grafana also doesn't seem totally consistent with the one in CockroachDB's Admin UI.  It's correlated, though.

Why not go further and see how this goes?

At 2:08 PM PT:

[source,text]
----
$ cockroach workload run ycsb --concurrency=128 --drop --histograms histograms-ycsbA-c=128-"$(date +%FT%TZ)".out --tolerate-errors --workload A --duration 5m
----

This one definitely saw spikes in SQL "exec_error", and potentially worse throughput than the previous one.  All db nodes are pretty tapped at this point.

I want to see what happens with this workload if I tune up the split count and total row count, since it seems pretty pokey right now.  I'm going to go back to concurrency 16, which is one step past 8, which was the stablest and most consistent.

[source,text]
----
$ cockroach workload init ycsb --splits 8 --concurrency=16 --drop --insert-count=1000000 --workload A
$ cockroach workload  run ycsb --splits 8 --concurrency=16 --drop --insert-count=1000000 --workload A --histograms histograms-ycsbA-c=16-"$(date +%FT%TZ)".out --tolerate-errors --duration 1h
----

The loading step is taking quite a while.  It's hammering both CPUs on one database node (so, concurrency=1, I guess)?

While this was going on, I was able to:

[source,text]
----
root@192.168.1.118:26257/ycsb> select count(*) from usertable;
  count
----------
  438000
(1 row)

Time: 51.558088946s
----

But when I tried this later, I got a strange error:

[source,text]
----
root@192.168.1.118:26257/ycsb> select count(*) from usertable;
ERROR: driver: bad connection
warning: connection lost!
opening new connection: all session settings will be lost
root@192.168.1.118:26257/ycsb>
----

I'm not sure which host I was connected to.  I checked all three logs but didn't see anything obvious.

The `init` command failed after 20 minutes with:

[source,text]
----
cockroachdb@loadgen0:~$ time cockroach workload init ycsb --splits 8 --concurrency=16 --drop --insert-count=1000000 --workload A
Error: failed insert into usertable: pq: split failed while applying backpressure to [txn: 4705c25f], ConditionalPut [/Table/81/1/"user4211402063788639270"/0,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/1/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/2/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/3/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/4/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/5/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/6/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/7/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/8/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/9/1,/Min), ConditionalPut [/Table/81/1/"user4211402063788639270"/10/1,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/0,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/1/1,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/2/1,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/3/1,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/4/1,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/5/1,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/6/1,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/7/1,/Min), ConditionalPut [/Table/81/1/"user8166519625965030401"/8/1,/Min), ... 10976 skipped ..., ConditionalPut [/Table/81/1/"user6890362626482376666"/7/1,/Min), ConditionalPut [/Table/81/1/"user6890362626482376666"/8/1,/Min), ConditionalPut [/Table/81/1/"user6890362626482376666"/9/1,/Min), ConditionalPut [/Table/81/1/"user6890362626482376666"/10/1,/Min), EndTxn(commit:true tsflex:true) [/Table/81/1/"user4211402063788639270"/0]  on range r101:/{Table/81-Max} [(n1,s1):1, (n2,s2):2, (n3,s3):3, next=4, gen=42]: operation "split queue process replica 101" timed out after 1m0s: split at key /Table/81/1/"user1430647350823960411" failed: context deadline exceeded

real    19m28.125s
user    0m15.002s
sys     0m2.580s
----

Amusing sideshow:

[source,text]
----
root@192.168.1.118:26257/ycsb> select count(*) from usertable;
invalid syntax: statement ignored: unexpected error: read tcp 192.168.1.118:54604->192.168.1.118:26257: read: connection reset by peer
warning: error retrieving the transaction status: driver: bad connection
warning: connection lost!
opening new connection: all session settings will be lost
root@192.168.1.118:26257/ycsb ?>
----

But ultimate it had created 714,000 rows:

[source,text]
----
select count(*) from usertable;
  count
----------
  714000
(1 row)

Time: 12.48402931s
----

Details on that https://www.cockroachlabs.com/docs/stable/common-errors.html#context-deadline-exceeded[context deadline exceeded] error.

The database is at least 4 GiB now, although ycsb is only 1.6 GiB (maybe that's logical?).  There's only one range, though.

Resuming with:

[source,text]
----
$ time cockroach workload init ycsb --splits 8 --concurrency=16 --insert-start 714000 --insert-count=1000000 --workload A
----

I realized that isn't right -- the insert count needs to be adjusted.  Tried to get a new count and got:

[source,text]
----
root@192.168.1.118:26257/ycsb> select count(*) from usertable;
ERROR: driver: bad connection
warning: connection lost!
opening new connection: all session settings will be lost
----

This is repeatable.  Is this an haproxy timeout?  I didn't reproduce it (one time) hitting a CRDB node directly.

So now:

[source,text]
----
$ time cockroach workload init ycsb --splits 8 --concurrency=16 --insert-start 714000 --insert-count=286000 --workload A
Error: failed insert into usertable: pq: duplicate key value (ycsb_key)=('user10357802244052365217') violates unique constraint "primary"

real    1m7.990s
user    0m0.787s
sys     0m0.831s
----

Yeesh.

I'm seeing this repeatedly now, even when I bump the count up.  When I bumped it way up:

[source,text]
----
cockroachdb@loadgen0:~$ time cockroach workload init ycsb --splits 8 --concurrency=16 --insert-start 800000 --insert-count=200000 --workload A
Error: failed insert into usertable: driver: bad connection

real    3m1.377s
user    0m1.018s
sys     0m0.641s
----

I'm going to try without going through haproxy.

[source,text]
----
$ time cockroach workload init ycsb --splits 8 --concurrency=16 --insert-start 900000 --insert-count=100000 --workload A postgresql://root@192.168.1.104:26257/ycsb?sslmode=disable
----

This ultimately failed with another constraint violation error.  There are now 721,000 rows in `usertable`.

For kicks, I'm going to start the above workload anyway to see how it goes.  Tomorrow, I'll probably reset and do the "kv" workload.  This should have a few advantages because it doesn't do so much work during the "init" phase.  That's good because this phase is harder to observe and not parallelized, as far as I can tell.

It may still be worth digging into the ycsb issues to better understand how things fail when they go wrong.  It would be good to better understand what SQL it's running (how many rows is it trying to insert at once?), with what concurrency, how long those INSERTs are taking, etc.

I realized as I started this that I wasn't sure the splits had been applied.  So I'll run this:

[source,text]
----
$ time cockroach workload init ycsb --splits 8 --concurrency=16 --insert-count=0 --workload A
I200908 22:38:20.458190 1 workload/workloadsql/workloadsql.go:113  starting 8 splits

real    0m1.885s
user    0m0.106s
sys     0m0.058s
$ cockroach workload  run ycsb --splits 8 --concurrency=16 --workload A --histograms histograms-ycsbA-c=16-"$(date +%FT%TZ)".out --tolerate-errors --duration 1h
----

Incidentally, this command's documentation is rather confused.  Some of these (like `--splits`) apply at init time, but that's not clear.  Other things are just documented wrong (`--insert-start` vs. `--initial-count`).

A few minutes into this workload (around 3:47pm PT), the Grafana metrics tanked.  Activity went to zero, CPU utilization is no longer reported.  All services in all VMs appear to be running as normal.  The workload is reporting a bunch of successful operations per second!

It looks like the "mon" zone ran out of disk space.  It's still got a 2 GiB disk for some reason, even though the disk is 10 GiB.  The other nodes had this problem earlier, and rebooting fixed it because Joshua's image automatically expands the pool to match the physical size.  Maybe I forgot to reboot this one?  Anyway, I made the mistake of trying to fix this by rebooting it.  I doubt this will work because it probably won't be able to come up with 0 bytes available.  I may have to redeploy this VM, in which case I'll have lost today's testing data.  I do have screenshots and the client-side data, if it's really important.  It's also presumably reproducible.

I redeployed this zone (having saved the dashboard JSON!).  As the workload is running now (see above): CPU utilization is high for all CPUs on all db nodes (77%-90%).  db1 is a little lower -- closer to the 77% level.  Queries aren't perfectly distributed across the nodes, but it's not bad.  Average throughput is about 1K selects + 1K updates per second, which is a little less than c=16 earlier today, but the database is much bigger now.

Throughput dropped to zero for a while and spat this out:

[source,text]
----
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
 2101.0s        0         1157.6         1059.4      3.3      7.3     13.1     21.0 read
 2101.0s        0         1139.6         1058.5     10.0     17.8     28.3     46.1 update
 2102.0s        0         1123.4         1059.4      3.4      7.9     18.9     28.3 read
 2102.0s        0         1092.3         1058.6     10.5     18.9     33.6     52.4 update
 2103.0s        0         1117.0         1059.5      3.3      6.8     15.7     37.7 read
 2103.0s        0         1117.0         1058.6     10.0     19.9     28.3     35.7 update
 2104.0s        0         1229.1         1059.5      3.5      6.8     11.0     23.1 read
 2104.0s        0         1145.1         1058.6     10.0     16.3     24.1     30.4 update
 2105.0s        0         1192.1         1059.6      3.4      8.4     14.2     26.2 read
 2105.0s        0         1083.1         1058.6     10.0     19.9     29.4     39.8 update
 2106.0s        0         1160.1         1059.6      3.4      7.1     14.2     26.2 read
 2106.0s        0         1146.1         1058.7     10.0     17.8     26.2     35.7 update
 2107.0s        0         1131.9         1059.7      3.4      7.6     13.6     27.3 read
 2107.0s        0         1129.9         1058.7     10.0     18.9     28.3     35.7 update
 2108.0s        0         1142.0         1059.7      3.4      8.1     14.2     35.7 read
 2108.0s        0         1120.0         1058.7     10.0     18.9     26.2     39.8 update
 2109.0s        0         1155.2         1059.8      3.4      7.1     10.5     21.0 read
 2109.0s        0         1207.2         1058.8     10.0     16.3     21.0     31.5 update
 2110.0s        0         1154.4         1059.8      3.4      8.4     16.3     23.1 read
 2110.0s        0         1056.4         1058.8     10.0     21.0     32.5     48.2 update
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
 2111.0s        0         1134.6         1059.8      3.3      6.8     17.8     35.7 read
 2111.0s        0         1124.6         1058.8     10.0     17.8     28.3     60.8 update
 2112.0s        0            0.0         1059.3      0.0      0.0      0.0      0.0 read
 2112.0s        0            0.0         1058.3      0.0      0.0      0.0      0.0 update
 2113.0s        0            0.0         1058.8      0.0      0.0      0.0      0.0 read
 2113.0s        0            0.0         1057.8      0.0      0.0      0.0      0.0 update
 2114.0s        0            0.0         1058.3      0.0      0.0      0.0      0.0 read
 2114.0s        0            0.0         1057.3      0.0      0.0      0.0      0.0 update
 2115.0s        0            0.0         1057.8      0.0      0.0      0.0      0.0 read
 2115.0s        0            0.0         1056.8      0.0      0.0      0.0      0.0 update
 2116.0s        0            0.0         1057.3      0.0      0.0      0.0      0.0 read
 2116.0s        0            0.0         1056.3      0.0      0.0      0.0      0.0 update
 2117.0s        0            0.0         1056.8      0.0      0.0      0.0      0.0 read
 2117.0s        0            0.0         1055.8      0.0      0.0      0.0      0.0 update
 2118.0s        0            0.0         1056.3      0.0      0.0      0.0      0.0 read
 2118.0s        0            0.0         1055.3      0.0      0.0      0.0      0.0 update
 2119.0s        0            0.0         1055.8      0.0      0.0      0.0      0.0 read
 2119.0s        0            0.0         1054.8      0.0      0.0      0.0      0.0 update
 2120.0s        0            0.0         1055.3      0.0      0.0      0.0      0.0 read
 2120.0s        0            0.0         1054.3      0.0      0.0      0.0      0.0 update
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
 2121.0s        0            0.0         1054.8      0.0      0.0      0.0      0.0 read
 2121.0s        0            0.0         1053.8      0.0      0.0      0.0      0.0 update
 2122.0s        0            0.0         1054.4      0.0      0.0      0.0      0.0 read
 2122.0s        0            0.0         1053.3      0.0      0.0      0.0      0.0 update
 2123.0s        0            0.0         1053.9      0.0      0.0      0.0      0.0 read
 2123.0s        0            0.0         1052.9      0.0      0.0      0.0      0.0 update
 2124.0s        0            0.0         1053.4      0.0      0.0      0.0      0.0 read
 2124.0s        0            0.0         1052.4      0.0      0.0      0.0      0.0 update
 2125.0s        0            0.0         1052.9      0.0      0.0      0.0      0.0 read
 2125.0s        0            0.0         1051.9      0.0      0.0      0.0      0.0 update
 2126.0s        0            0.0         1052.4      0.0      0.0      0.0      0.0 read
 2126.0s        0            0.0         1051.4      0.0      0.0      0.0      0.0 update
 2127.0s        0            0.0         1051.9      0.0      0.0      0.0      0.0 read
 2127.0s        0            0.0         1050.9      0.0      0.0      0.0      0.0 update
 2128.0s        0            0.0         1051.4      0.0      0.0      0.0      0.0 read
 2128.0s        0            0.0         1050.4      0.0      0.0      0.0      0.0 update
 2129.0s        0            0.0         1050.9      0.0      0.0      0.0      0.0 read
 2129.0s        0            0.0         1049.9      0.0      0.0      0.0      0.0 update
 2130.0s        0            0.0         1050.4      0.0      0.0      0.0      0.0 read
 2130.0s        0            0.0         1049.4      0.0      0.0      0.0      0.0 update
E200908 23:14:11.770407 1 workload/cli/run.go:445  pq: result is ambiguous (error=rpc error: code = Unavailable desc = transport is closing [propagate])
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
 2131.0s        1            0.0         1049.9      0.0      0.0      0.0      0.0 read
 2131.0s        1            0.0         1048.9      0.0      0.0      0.0      0.0 update
 2132.0s        3          745.8         1049.8      3.3      7.1     12.6  20401.1 read
 2132.0s        3          772.8         1048.8     10.0     18.9     27.3  20401.1 update
 2133.0s        3          836.1         1049.7      3.0      6.3      8.9     12.1 read
 2133.0s        3          864.1         1048.7      9.4     16.3     28.3     35.7 update
 2134.0s        3          815.0         1049.5      3.1      6.6     11.5     26.2 read
 2134.0s        3          808.0         1048.6      9.4     18.9     33.6  22548.6 update
 2135.0s        3          879.2         1049.5      3.0      6.6      8.9     13.1 read
 2135.0s        3          854.1         1048.5      9.4     14.7     22.0     37.7 update
 2136.0s        3          856.1         1049.4      3.1      6.3      7.6     12.1 read
 2136.0s        3          849.1         1048.4      9.4     16.3     23.1     27.3 update
 2137.0s        3          834.9         1049.3      3.0      6.6     11.0     13.6 read
 2137.0s        3          805.9         1048.3     10.0     17.8     24.1     30.4 update
 2138.0s        3          930.8         1049.2      3.1      6.3     10.5     18.9 read
 2138.0s        3          864.8         1048.2      8.9     14.7     21.0     29.4 update
 2139.0s        3          829.2         1049.1      2.9      6.0     10.0     62.9 read
 2139.0s        3          875.2         1048.1      9.4     16.3     21.0     32.5 update
 2140.0s        3          833.7         1049.0      3.0      6.8      9.4     21.0 read
 2140.0s        3          840.7         1048.0      9.4     17.8     23.1     31.5 update
----

Another one I saw was:

[source,text]
----
E200908 23:15:23.487617 1 workload/cli/run.go:445  pq: result is ambiguous (error=unable to dial n1: breaker open [exhausted])
----

Maybe I'm running too close to saturation?  Until this point, p95 latency was very steady around 18ms across all three nodes.  p99 was very steady at around 30ms across all three nodes.  Now the thing is falling apart.  I wonder if this would work better with three different load generator instances (processes, not VMs) instead of haproxy?  But these look like internal errors.


A few minutes later, the workload has recovered to where it was before.  It seems like we triggered a crash?  But the uptime on all of them shows 6 hours.  That said, there was a loss of connections to .236 and a bunch of ranges reported being uner-replicated for a minute.  CockroachDB did not actually restart on that node.  I do see some errors in the logs:

[source,text]
----
W200908 23:15:19.027322 198 kv/kvserver/node_liveness.go:592  [n3,liveness-hb] failed node liveness heartbeat: oper
ation "node liveness heartbeat" timed out after 4.5s
(1) operation "node liveness heartbeat" timed out after 4.5s
Wraps: (2) context deadline exceeded
Error types: (1) *contextutil.TimeoutError (2) context.deadlineExceededError

An inability to maintain liveness will prevent a node from participating in a
cluster. If this problem persists, it may be a sign of resource starvation or
of network connectivity problems. For help troubleshooting, visit:

    https://www.cockroachlabs.com/docs/stable/cluster-setup-troubleshooting.html#node-liveness-issues

...

I200908 23:15:19.062947 196 server/status/runtime.go:504  [n3] runtime stats: 0 B RSS, 242 goroutines, 108 MiB/1004
 MiB/269 MiB GO alloc/idle/total, 174 MiB/221 MiB CGO alloc/total, 187.1 CGO/sec, 0.0/0.0 %(u/s)time, 0.0 %gc (1x),
 0 B/0 B (r/w)net
W200908 23:15:19.482447 98 kv/kvserver/closedts/provider/provider.go:155  [ct-closer] unable to move closed timesta
mp forward: not live
(1) attached stack trace
  | github.com/cockroachdb/cockroach/pkg/kv/kvserver.init
  |     /ws/cockroach/gopath/src/github.com/cockroachdb/cockroach/pkg/kv/kvserver/node_liveness.go:60
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5420
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5415
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5415
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5415
  | runtime.doInit
  |     /opt/go/1.14.4/src/runtime/proc.go:5415
  | runtime.main
  |     /opt/go/1.14.4/src/runtime/proc.go:190
  | runtime.goexit
  |     /opt/go/1.14.4/src/runtime/asm_amd64.s:1373
Wraps: (2) not live
Error types: (1) *withstack.withStack (2) *errors.errorString
----

== 2020-09-09

Switching to "kv" workload (see yesterday's notes).

cockroach workload init kv --concurrency 4 --max-block-bytes=4096 --min-block-bytes=3072
for c in 4 8 16 32 64 128; do
    cockroach workload run kv --concurrency $c --duration 10m --histograms histograms-kv-c=$c-$(date +%FT%TZ)Z.out  --max-block-bytes=4096 --min-block-bytes=3072 --read-percent=50 --tolerate-errors
done

Notes:

* This is a considerably larger record size than I had been testing previously.
* The database is getting bigger each time this way so it's not a totally fair test among different levels of concurrency.

Results:

* The total number of SQL connections and active queries scales up with the concurrency as we'd expect.
* Starting with c=8:
** the CPU utilization graphs look about the same for all runs.
** the distribution of SQL queries to each node looks about the same.
* The SQL query throughput looks about the same among all these runs.
* The SQL query p95 latency increases with each run.
* According to `iostat`, the disk is quite busy much of the time (essentially 100% at c=64).  Occasionally, the wait time at the zpool level is upwards of 100 (ms?), but it never gets nearly that high on the actual disk.
* There was one spike in p99 SQL latency of 9s on one node (192.168.1.236 @ 15:48:30Z).

Conclusions:

* The system is basically saturated at c=4.
* Extreme outliers start around c=32.  Things really start getting nonlinear around c=128.

Possible way to go next: stick with c=16 and expand the cluster while all this is going on.  From initial 3 nodes -> 6 nodes -> 9 nodes -> 12 nodes.

17:10Z: deployed node#4.
17:14Z: the new node is definitely in service.  CPU utilization of other nodes has gone down a bit, as has query throughput.  p95/p99 latency spiked a lot.  Heartbeat latency spiked to over 5s.  Big spike in exec errors over 4Kps.
17:17Z: another spike in p95/p99 to 10s.  I don't know why this is happening -- the client isn't even updated to establish new connections so it shouldn't be using the new node.

[source,text]
----
  760.0s        0            0.0          366.8      0.0      0.0      0.0      0.0 write
E200909 17:13:18.084065 1 workload/cli/run.go:445  ERROR: result is ambiguous (error=unable to dial n2: breaker open [exhausted]) (SQLSTATE 40003)
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
  761.0s        1           21.0          364.9    130.0  13421.8  13421.8  13421.8 read
...
  969.0s        4            0.0          304.6      0.0      0.0      0.0      0.0 write
E200909 17:16:47.529391 1 workload/cli/run.go:445  EOF
  970.0s        5            6.0          303.1     13.1     35.7     35.7     35.7 read
  970.0s        5            5.0          304.3     18.9  60129.5  60129.5  60129.5 write
E200909 17:16:48.580680 1 workload/cli/run.go:445  EOF
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
  971.0s       15          115.0          302.9     17.8  60129.5  60129.5  60129.5 read
  971.0s       15          111.0          304.1     15.2    113.2  60129.5  60129.5 write
----

As of 17:19Z: consistently seeing 20 errors per second with 100-200 ops per second.

Note: Prometheus didn't pick up the new node right away.  Maybe a better methodology is to preprovision everything, then shut down a bunch?

17:22:45: restarted Prometheus

Note: replication started around 17:12:30 and finished around 17:25Z.

At 17:30Z, I'm going to restart the load generator to force it to pick up all four nodes.

Perhaps not surprisingly?  This only made some performance worse because some ranges moved to a node that's not handling any requests.

17:28:50Z: restarted client workloads  However, despite having sent SIGHUP to haproxy, it doesn't seem to have picked up the fourth server.
17:30:40Z: restart both haproxy and load generator.
Now we do see 4 active servers in haproxy and all four CRDB nodes have connections.

Note: I just checked the CRDB Admin UI to look at "queries per store", which has previously been a proxy for whether queries were being served equally by the different nodes, and it does look well distributed both before and after the new node was added.

The performance now is decidedly worse than before I added the new node.  p95/p99 latency is definitely higher for two nodes, and about the same for the other two (even the one which wasn't up, which is weird).  Right now, the disks on db0 are 100% pegged all the time.  Disks on the other two original nodes have a fair bit of headroom.  Why is that one so busy?  Is this because the kv workload is not random?

In the Admin UI, I see that the UPSERT statements have seen 10 retries, but that's cumulative -- doesn't seem important.

I can see that all four nodes are serving a comparable number of queries, and their CPU utilization isn't to far off (and all under 30% per CPU).  But db0 is still being hammered on I/O.  db1 is going through periods where it's busy too, but not nearly as much.  Note that average service time on this disk is worse than disk on db1, even when db1's is busy too, by a factor of 3 or so (6ms for db1, 20ms for db0).  A few minutes later: the 100% busy seems to have moved to db2 and db0 was idle for a little while.  A few seconds later we're back to db0.

Maybe it would be more interesting to do just 20% writes / 80% reads.

CRDB does recommend:

> Disks must be able to achieve 500 IOPS and 30 MB/s per vCPU....Monitor IOPS for higher service times. If they exceed 1-5 ms, you will need to add more devices or expand the cluster to reduce the disk latency.

Anyway, the preformance has been the same for a while.  I'm going to shut this down and drop both databases for now in prep for future runs.  I'm also going to decommission that fourth node.

This failed:

[source,text]
----
# cockroach node decommission  4

  id | is_live | replicas | is_decommissioning | membership | is_draining
-----+---------+----------+--------------------+------------+--------------
   4 |  true   |       53 |       false        |   active   |    false
(1 row)

  id | is_live | replicas | is_decommissioning |   membership    | is_draining
-----+---------+----------+--------------------+-----------------+--------------
   4 |  true   |       53 |        true        | decommissioning |    false
(1 row)
..........
  id | is_live | replicas | is_decommissioning |   membership    | is_draining
-----+---------+----------+--------------------+-----------------+--------------
   4 |  true   |       52 |        true        | decommissioning |    false
(1 row)
...........
ERROR: connection lost.

while trying to mark as decommissioning: rpc error: code = Unavailable desc = transport is closing
Failed running "node decommission"
----

More haproxy woes?

== 2020-09-10

Not much testing today, but I'm reflecting on the issues I've hit so far.  I've hit a bunch of different client issues that seem potentially related to overload, and seen symptoms of overloaded servers (e.g., missed heartbeats).  I've potentially been pushing the system beyond its intended capacity, particularly in terms of I/O.  It _should_ handle that okay, but maybe isn't a great first test.

Maybe try a few simplifying changes:

* Provision 6 database nodes up front, but don't start CockroachDB on three of them.  (Or, disable cockroachdb on the last three before running `cockroach init`.)  This way I eliminate any disruptive change to the initially-running three (like restarting them, which my Terraform config normally does, although I had commented that out yesterday).  And I know exactly when each one starts.
* Factor out haproxy: instead of one load generator process using haproxy to talk to CRDB nodes, maybe use separate client processes pointed at specific CRDB nodes.  They won't automatically start using new nodes this way so I will have to start more up again.
* Let's not start by pushing the cluster to its limit.  Instead, let's separate out a few different questions:
** try to replicate something close to the https://www.cockroachlabs.com/docs/stable/performance.html#throughput[basic sysbench numbers that they got on AWS]?  These are much bigger machines, but even if we can just achieve that latency at a lower level of concurrency, that'd be useful.
** demonstrate horizontal scalability (_not_ necessarily online): maybe the way to think about this is: ramp up load generators until p95 latency reaches some target.  See how that point differs at different cluster sizes.
** demonstrate expanding the cluster under modest load (largely ignoring performance -- it would be enough that it doesn't get worse or experience errors)
** demonstrate shrinking the cluster under modest load (similar to expansion)
** demonstrate the impact of failures on a modest load (again, largely ignoring performance)

Last item of the day: trying to get %busy and average I/O time metrics in Grafana.  This is a little tricky from the kstats.

== 2020-09-14

Conclusions from today:

* Built sysbench and started using its oltp_insert workload for testing.
* Ran into major interference from AWS "gp2" (storage volume) performance, which falls off a cliff potentially hours after starting a workload.  Confirmed this with CloudWatch "burst" metric.  Will work around this with "io1" volumes instead of "gp2".
* Aside from that, performance was reasonably stable.  I successfully expanded the cluster a few times.  Performance got better, but not linearly so, and load was not perfectly distributed with n=4 or n=5.  (Did not get to n=6 because of the I/O problem.)
* Ran into minor issue with the image I'm using: can't install packages with `pkg`, apparently due to missing SSL certs.

Details:

* I've brought up a cluster with 6 database nodes, but only three had cockroachdb running when I initialized the cluster.
* Made a build of sysbench:
** in my build machine, had to install postgresql-12, autotools, libtool
** note: could not do this in Joshua's image because pkg tools can't do anything because they're looking for /etc/openssl/certs.  In my build zone, that appears to be /etc/{ssl,crypto}/certs.
** set --prefix=/opt/sysbench, tarred up directory, and copied to "loadgen0".  Also needed to add libpq.so, which I did by hand afterwards.
** `LDFLAGS='-R /opt/sysbench/lib'  ./configure --without-mysql --with-pgsql --prefix=/opt/sysbench`

Around 9:23AM PT:

[source,text]
----
# sysbench --threads=1 --time=0 --pgsql-host=192.168.1.227 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert run
----

from loadgen0.  That settled around 200 inserts per second (all handled by .227, which is db0), p95 latency=6ms, p99 latency=13ms, about 50% CPU utilization in all four CPUs of db0 and db1, just over 40% disk busy time in all three db nodes.  That's all writes, about 4 MBps, with spikes up to almost 8.

By 9:37, this has been quite stable.  Let's start another load generator aimed at db1:

[source,text]
----
# sysbench --threads=1 --time=0 --pgsql-host=192.168.1.66 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert run
----

By 9:47, this has been quite stable in throughput, with some variation in latency.  We're at 300 inserts / second, evenly split between db0 and db1.  CPU utilization for those nodes is 50%-60% (per CPU).  p95 latency (both nodes) is around 8ms, p99 latency ranging from 16-17.5ms.  Disks almost 50% busy on all nodes.  Average disk I/O time is unchanged, largely maxing around 800us -- pretty good!  CockroachDB heartbeat p99 latency is pretty consistently under 10ms.

At 9:50AM, I started a third load generator (same loadgen VM):

[source,text]
----
# sysbench --threads=1 --time=0 --pgsql-host=192.168.1.214 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert run
----

This has settled at a throughput of about 400 inserts per second, evenly split among all three db hosts.  CPU utilizationr anges from 36-60% (per CPU) on the db nodes, with db2 closer to 40% (lower than the other two).  p95 ranges from 8-10ms, p99 15-22ms.  Disks are about 50% busy.  The disk write IOPS and busy time haven't changed a lot with the last addition.  I'm seeing CockroachDB p99 heartbeat outliers up to 110ms, but that's still quite quick.

I'm going to let this run a little while longer to see what happens.

At 10:47AM: this has been fairly stable at the above numbers.  There are a couple of ways to go from here:

* could add more write load (an additional thread for each load generator)
* could add a read workload
* could try turning off one node, but we're not going to be able to take writes that way anyway since the replication factor is 3
* try expanding the cluster without changing the load
** more conservative: do it without the workload running and see if it affects anything
** more aggressive: do this with the workload running

I'm leaning towards online expansion of the cluster.  At 10:51am: enabled cockroachdb on db3.

10:57am: there was a burst of errors (peaking at 1 error per second) when I enabled CRDB, though the load generators didn't complain at all.  Cockroach heartbeat p99 latency peaked at 40ms.  I can see the new node took on some of the write workload, particularly from db1 (looking at a shift in the write IOPS graph and percent-busy graph).  Average I/O time is still well under 1ms, and disks remain about 50% busy on the busy nodes (less so on db1 and the new db3).  Overall average throughput is slightly increased (just under 400 inserts per second to about 420).  p95 and p99 decreased a few ms each but are largely the same.  Next I will add the next database node.

11:01AM PT: added next node.

11:13AM PT: average throughput essentially unchanged, though there was a momentary crash at 18:01:30Z to just under 300 inserts per second.  That correlated with a spike in p95 on all nodes to about 15-19ms and p99 to about 35-41ms.  This seems to have shifted load from db2 (in terms of CPU utilization and disk usage and write IOPS).  Heartbeat latency p99 peaked at 204ms on the newly-added node.  Again, we had a small spike in error rate.  It's not clear if the client saw theses.

11:17AM PT: I'm going to turn off the load generators and turn them on again in order to get summary reports from them and to make sure the load isn't somehow state-dependent.  Before I do that, I see why had another small crash in throughput at 18:18Z.  This affected all nodes, like the previous one.  Note that there's plenty of CPU headroom on each CPU (though utilization spiked to 80% on a few CPUs at the time of the crash).  Similarly, disk %busy never exceeded 60% on the peak node, and it actually dipped at this time.  Average disk I/O latency was unchanged around this time.  Network throughput had a small dip.  There's no spike in heartbeat latency.  The only thing I see is a small spike in CRDB "exec_error", but it's less even than when adding new nodes before.  Well, as I said, I'm going to restart the load generators to get their numbers.

11:22AM PT: I killed the load generators, but they did not report any numbers, unfortunately.  I restarted these all around 11:23:31 PT.

11:48AM PT: noticed a major reduction in throughput that started around 11:41.  This seems to have been caused by a very sudden spike in average disk I/O latency on db0, from about about 300us to about 3ms.  Other VMs were not affected by this, but naturally the %busy on db0 shot up, to about 88%.  Write IOPS went down everywhere by a factor of ~4-5.  Net throughput dropped significantly too.  No spike in CRDB heartbeat latency nor errors.  CPU utilization down across the board.  p95 CRDB latency shot from about 10ms to about 40ms across the board, and p99 from about 20ms to about 50ms.  This is all consistent with a sudden, terrible degradation in performance from EBS, and I can't think of an obvious cause in the application.

Digging into this, there's some https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ebs-volume-types.html[documentation on this].

> Each volume receives an initial I/O credit balance of 5.4 million I/O credits, which is enough to sustain the maximum burst performance of 3,000 IOPS for 30 minutes. This initial credit balance is designed to provide a fast initial boot cycle for boot volumes and to provide a good bootstrapping experience for other applications. Volumes earn I/O credits at the baseline performance rate of 3 IOPS per GiB of volume size. For example, a 100 GiB gp2 volume has a baseline performance of 300 IOPS. 
> The maximum I/O credit balance for a volume is equal to the initial credit balance (5.4 million I/O credits). 

Baseline performance for my 60 GiB volume would be 180 IOPS.

Based on their equation:

[source,text]
----
burst duration = (credit balance) / (burst IOPS - 3 * volsize)
    = 5.4M / (1600 IOPS - 3 * 60GiB)
    = 5.4M / (1600 - 180)
    = 5.4M / 1420
    = 3800
----

Presumably that's 3800 seconds, or 63 minutes.  I confirmed with CloudWatch that this instance ran out of its credit around 18:40Z.

How to work around this?  It seems very hard to manage this in a benchmarking environment.  Even if I could spend all the credits up front, it'd be hard to make sure it was constantly zero -- and across all six database hosts.

Here are a few different pricing options:

* https://calculator.aws/#/estimate?id=16e6ed9a0102c9e24880a0175edaa9eef88ac8c9[Original estimate] (6 c4.large instances with 60 GiB gp2 volumes (180 IOPS)): $474 / month
* https://calculator.aws/#/estimate?id=184d382407f5e4a64b296ec69c374f3155419801[Estimate using 167GiB gp2 volumes] to get 500 IOPS: $538.20 / month
* https://calculator.aws/#/estimate?id=efaf0e10e9cf496d4dfcc95a26dbbf4cecef56b7[Estimate using 60 GiB io1 volumes] with 500 IOPS: $678 / month

It's cheaper to just get bigger "gp2" volumes than to buy provisioned IOPS.  The problem is that I actually kind of want the consistency: I don't want the performance to plummet like it did today, even if the low value is actually fine.  It sure sucks to pay more for the same IOPS and less storage, though.

Note that the load generator does not need this.  It can stay with "gp2".

At 3:10PM PT, I'm re-evaluating performance from the last three hours:

* p95 has been pretty consistently around 42ms
* p99 has been 50-100ms with lots of spikes (peak spike was 125ms)
* CPU utilization has been consistently low
* Query throughput has consistently averaged about 125 inserts per second, though it's been rocky ranging from 100-125 qps.
* Average I/O time for all disks has been under 1ms except for db0, which has averaged 3.4ms (see above).  All disks except that one have been under 20% busy, while that one averaged 90%.
* Write IOPS differs across hosts and ranges from about 200 to 550.  Read IOPS are negligible.
* Network throughput is negligible -- averaged under 400 KBps for either inbound or outbound for all hosts.
* NTP: according to Cockroach, the mean RPC clock offset has maxed at around 200us.
* Average p99 CockroachDB heartbeat latency for the worst node is 44ms.  Peak was 354ms.
* Peak error rate was 0.35 errors per second at one point.

Overall I'd say it's been fairly stable, for a system that's maxxed out at I/O capacity.

I used Terraform to update the storage class from "gp2" to "io1" (that can be done online) and redeployed the load generator completely to get the sysbench binaries.

Plan for tomorrow:

* Run a similar sequence of steps now that I'm on "io1" storage.

== 2020-09-16

Summary of the day:

* Restarted testing on sysbench database, now that I'm using provisioned IOPS.
* Forgot to scale-down the cluster to 3 nodes, so I decided to try this dynamically.  Found some surprising replication behavior and posted to the forum about this.
* Also found that the workload got very suddenly faster (2x) after an hour or so.  Resource utilization went down, but I/O latency didn't get any faster.  It's as though it just got twice as efficient.  Relatedly, there was a range merge when this happened, so maybe some writes avoided some round-trips after that?  This is great (load-based range merges), but also makes testing performance harder.

Plan for today:

* drop previous sysbench database
* disable db3, db4 to get back to a 3-node cluster
* ramp up workload:
** start one load generator for each db node, about 10 minutes apart
* expand cluster, one node at a time, about 10 minutes apart

17:12Z: dropped database.  This was fairly cheap and didn't seem to do much work (I/O or otherwise).  Somewhat surprisingly, this didn't affect percentage of capacity used or the total number of ranges.  This https://forum.cockroachlabs.com/t/reclaiming-storage-capacity/1024[appears to be a result of the delayed GC process].  This might be an opportunity to reconfigure the TTL period as a test.

At around 17:19:30Z:

[source,text]
----
root@192.168.1.227:26257/defaultdb> SHOW ZONE CONFIGURATION FOR RANGE default;
     target     |              raw_config_sql
----------------+-------------------------------------------
  RANGE default | ALTER RANGE default CONFIGURE ZONE USING
                |     range_min_bytes = 134217728,
                |     range_max_bytes = 536870912,
                |     gc.ttlseconds = 90000,
                |     num_replicas = 3,
                |     constraints = '[]',
                |     lease_preferences = '[]'
(1 row)

Time: 1.926221ms

root@192.168.1.227:26257/defaultdb> ALTER RANGE default CONFIGURE ZONE USING gc.ttlseconds=300 ;
CONFIGURE ZONE 1

Time: 27.301437ms

root@192.168.1.227:26257/defaultdb>
----

After this, I see:

- small spikes in CPU utilization (way more than before, but peaking at about 18% per CPU)
- some disk I/O and disk writes.
- a reduction in ranges per node from 38 to 34
- a reduction in capacity used per node from about 2.4% back to about 0.6%

That seems to have worked as expected.  I'm going to configure it back to the default:


[source,text]
----
root@192.168.1.227:26257/defaultdb> ALTER RANGE default CONFIGURE ZONE USING gc.ttlseconds=90000;
CONFIGURE ZONE 1

Time: 26.959762ms

root@192.168.1.227:26257/defaultdb> SHOW ZONE CONFIGURATION FOR RANGE default;
     target     |              raw_config_sql
----------------+-------------------------------------------
  RANGE default | ALTER RANGE default CONFIGURE ZONE USING
                |     range_min_bytes = 134217728,
                |     range_max_bytes = 536870912,
                |     gc.ttlseconds = 90000,
                |     num_replicas = 3,
                |     constraints = '[]',
                |     lease_preferences = '[]'
(1 row)

Time: 1.984135ms
----

So that's good.  On to the workloads.

I forgot (and hadn't previously noted) that I needed to run:

[source,text]
----
root@192.168.1.227:26257/defaultdb> CREATE DATABASE sbtest;
CREATE DATABASE

Time: 28.410777ms

root@192.168.1.227:26257/defaultdb> ^D
root@loadgen0:~# sysbench --threads=1 --time=0 --pgsql-host=192.168.1.227 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert prepare
WARNING: Both event and time limits are disabled, running an endless test
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Creating table 'sbtest1'...
Inserting 10000 records into 'sbtest1'
Creating a secondary index on 'sbtest1'...
----

Now the work:

[source,text]
----
sysbench --threads=1 --time=0 --pgsql-host=192.168.1.227 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert run
----

That started at 17:27:15.

17:34Z.  Oops.  I forgot to shut down the two database nodes.  I will try that now, while the workload is running.  Did that around 17:35:15.  Both were graceful shutdowns (well, `svcadm disable`).  As expected, we see a bunch of under-replicated ranges.  In about 5 minutes we should see that number go back to zero.  Note that after doing this:

* CPU utilization changed as expected: the two nodes I shut down went very low.  One of the remaining three nodes went up.  For whatever reason, db1 remains pretty idle.
* Transaction throughput is holding steady around 125 inserts / second.  It's unchanged after this change.
* p95 is about 11-12ms.  p99 is around 18ms.  These are unchanged after this change.
* I'm not sure why, but disk utilization on db0 went down, and db2 went up.
* db0 and db2 are doing almost exactly 1000 write IOPS, unchanged by the change.  db4 had been doing a lot, but that crashed (as expected) when I brought it offline).

Around 17:41Z, we see the cluster rebalance itself:

* the count of under-replicated ranges starts falling
* db1 quickly starts hitting 1000 write IOPS and its percent busy increases
* db0's disk utilization (%busy) goes down a bit from about 50% to about 40% (eyeballing it)
* db2's disk utilization (%busy) goes up by a comparable amount.
* CPU utilization increases on db1 from about idle to about 40% -- less than the other two, but doing a bunch of work now.
* In terms of impact: throughput was a little less consistent, but not much, and holding steady around 125 inserts / second.
* p95 and p99 are not visibly different.
* p99 heartbeat latency has peaked at about 95ms through this whole activity.

For some reason I don't understand, the system seems to have settled at 33 under-replicated ranges.  It's not clear why this would be.  I dug into the admin UI a bit and found that the `sbtest` database has one table, `sbtest`, which uses 95 MiB and 2 total ranges.  That may explain why only two nodes were busy earlier.  There are 22 ranges in the "system" database.  I'm not sure where the other 12 ranges come from, sicne the system reports 36 total ranges.  And I'm not sure why 33 are under-replicated.

In the "Advanced Debug" "Problem Ranges Report", I can see that the under-replicated ranges are 1-34, except for range 4.  I picked range r3 arbitrarily.  The leader is n3, which is also the leaseholder.  That node is still online.  The replicas appear to be on n1 and n2, also both up.  There's a neat log for the range.  Key events:

15:43 (long before I started): looks like the range is on n1, n2, and n3.  It already says "reason: range under-replicated".
17:51:26Z: begin adding n4 because of rebalance
17:51:26Z: begin removing n3 because rebalance (that seems weird)
17:51:26Z: seem to be related to adding n4 again (VOTER_INCOMING vs. LEARNER)
17:51:26Z: removed n3 ("abandoned learner replica")
18:01:24Z: begin adding n5 because range under-replicated
18:01:24Z: finish adding n5? (how is this possible?)
18:01:24Z: begin adding n3 as a replica because range under-replicated
18:01:24Z: finish adding replica n3

Things I don't understand about this:

* n4 and n5 should be suspect from 17:36 to 17:41 and dead after that.  How did we pick them as new replicas at 17:51?
* why did we abandon n3 at 17:51Z?
* how did we finish adding n5 as a replica at 18:01 if it's offline?
* why aren't we trying to fix the fact that it's under-replicated?
* (what are all the different states for replicas?)

Of note, according to https://www.cockroachlabs.com/docs/v20.1/cluster-setup-troubleshooting#admin-ui-shows-under-replicated-unavailable-ranges[this section in the docs]:

>  The number of failures that can be tolerated is equal to (Replication factor - 1)/2. Thus CockroachDB requires (n-1)/2 nodes to achieve quorum. For example, with 3x replication, one failure can be tolerated; with 5x replication, two failures, and so on.

In this case, we had five nodes, but the replication factor was only 3, which means we can only tolerate one failure.  Given that, I suppose it wasn't reasonable to expect that we could retain cluster liveness after this operation; however, it's a little surprising the data remains under-replicated given that at least one copy is available, and this range was never leased to a node that was down.

The link above has some useful debugging instructions, but they require you to look at the "Simulated Allocator Output".  I get an error accessing that:

> An error was encountered while loading this data: This information is not available due to the current value of the 'server.remote_debugging.mode' setting. Insufficient privileges to view this resource.

There's a "Learn more" link, but the content there implies that on an insecure cluster, there should be no privilege issue.  That setting is documented thus:

> set to enable remote debugging, localhost-only or disable (any, local, off)

with a default of "local".  I guess the problem here is that I'm not coming in over localhost.

Here, I updated it:

[source,text]
----
root@loadgen0:~# cockroach sql --host 192.168.1.227
#
# Welcome to the CockroachDB SQL shell.
# All statements must be terminated by a semicolon.
# To exit, type: \q.
#
# Server version: CockroachDB CCL v20.2.0-alpha.1-1729-ge9c7cc561c-dirty (x86_64-sun-solaris2.11, built 2020/08/04 04:08:24, go1.14.4) (same version as client)
# Cluster ID: cfb6ffc3-3553-4629-a174-beb9328b4f57
#
# Enter \? for a brief introduction.
#
root@192.168.1.227:26257/defaultdb> SHOW CLUSTER SETTING server.remote_debugging.mode;
  server.remote_debugging.mode
--------------------------------
  local
(1 row)

Time: 905.67µs

root@192.168.1.227:26257/defaultdb> SET CLUSTER SETTING server.remote_debugging.mode = "any";
SET CLUSTER SETTING

Time: 37.307198ms

root@192.168.1.227:26257/defaultdb> SHOW CLUSTER SETTING server.remote_debugging.mode;
  server.remote_debugging.mode
--------------------------------
  any
(1 row)

Time: 804.065µs

root@192.168.1.227:26257/defaultdb>
----

Now that web page works.  The messages are:

> kv/kvserver/allocator.go:402 [n3,status] replace dead - replacement for 2 dead replicas priority=12000.00
> kv/kvserver/replicate_queue.go:343 [n3,status] next replica action: replace dead
> kv/kvserver/allocator.go:508 [n3,status] allocate candidates: []
> kv/kvserver/store.go:2630 [n3,status] error simulating allocator on replica [n3,s3,r3/6:/System/{NodeLive…-tsd}]: 0 of 3 live stores are able to take a new replica for the range (3 already have a replica); likely not enough nodes in cluster

This is consistent with the documentation, but a little surprising: if the live nodes have replicas (which they do), why is it under-replicated?  If they don't, why can't we create a replica there?

Stopped to debug this a bit further.
Found https://godoc.org/github.com/cockroachdb/cockroach/pkg/roachpb#ReplicaType[documentation about the replica states].

Note also that performance skyrocketed at 18:27Z, from 125 inserts per second to just over 300.  They're still all being served from the same node.  CPU utilization and disk busy time went down.  Naturally, p95 and p99 went down.  However, average I/O time didn't go down, and bytes written per second _did_ -- it's as though the thing got suddenly more efficient.  Did we have a split?  Is that why it got better?  If so, how?

I did see that in Admin UI, under "KV Transactions", we had been doing 100% "committed" transactions and 0 "fast-path committed".  At about this time, we went to 330 of both "committed" and "fast-path committed".  At the same time, we went from a fair number of "partial batches" to 0.

One big change is that from about 17:30 to 18:30, queries were split evenly between stores n1 and n2.  At 18:30, they were all on n2.  This was about the time the cluster dropped one range (from 36 to 35).  There was a merge around this time, and "sbtest1" is now in one range.  This kind of makes sense -- no more round-trip latency?  But it's going to make testing hard again.

Back to the replication question, I'm looking through forum posts:

- Here's one about https://forum.cockroachlabs.com/t/resurrect-broken-cluster/3477/2[truly bad DR].
- Here's an https://forum.cockroachlabs.com/t/under-replicated-range-in-the-cluster/3558[interesting tool: manually re-replicate a range].

I submitted a post to the forum about this that's currently awaiting moderation.  My notes and screenshots are in https://gist.github.com/davepacheco/5f6dcf64104bfdf49802504c2f30feb1#file-notes-md[this gist].

Out of convenience, I let this workload run for several more hours.  As of 23:40Z (5 hours since the jump in performance at 18:30Z), over the last five hours:

* Throughput has been stable at just over 300 inserts / second.
* p95 has been stable at just over 3ms.
* p99 has been stable at 4-7ms.
* Disk %busy has been stable at 15-20% (max).
* With one exceptional spike to almost 6ms on db5 (which is down!), average I/O latency has been stable under 1ms (mostly 300-400us on the active db nodes)
* Disk write IOPS hover around 700 on the active nodes.  Less than 1 read IOPS.
* There was only one p99 heartbeat latency above about 200ms, and that was about 1.7ms on one node around 18:50.  Average p99 is under 20ms.

This is not an impressive load, but that seems pretty good behavior.

== 2020-09-17

Summary for today:

* brought the down nodes back up and answered a bunch of my questions from yesterday.

Details:

* dropped `sbtest` database and recreated it
* temporarily set gc.ttlseconds=30 to purge that data
* at this point, the problematic ranges were not affected (still 33 under-replicated ranges)
* enabled cockroachdb on db3, db4 at 21:17Z.  Under-replicated ranges quickly dropped to zero.

Out of curiosity, what happened on our range 3 that we inspected yesterday?

* The extra two columns show up in the top table for the replicas on n1 - n5.
* There's nothing new in the range log since 9/14.  Wait, that seems like the wrong date!

Was everything I was looking at yesterday garbage?  It seems like it was.  This answers most of our questions from yesterday, which were (taken from my post):

> Why is this range considered “under-replicated” at all? As far as I can tell from the report, it has three replicas, one on each of the remaining available nodes. Relatedly, it seems contradictory that there could be no “live stores able to take a new replica” because all of them already have a replica (and given that there are as many live stores as the replication factor).

This range has five replicas to begin with.  I checked the zone configuration, and the system ranges are all configured for 5 replicas:

```
root@192.168.1.227:26257/defaultdb> SHOW ZONE CONFIGURATIONS;
                       target                      |                               raw_config_sql
---------------------------------------------------+------------------------------------------------------------------------------
  RANGE default                                    | ALTER RANGE default CONFIGURE ZONE USING
                                                   |     range_min_bytes = 134217728,
                                                   |     range_max_bytes = 536870912,
                                                   |     gc.ttlseconds = 90000,
                                                   |     num_replicas = 3,
                                                   |     constraints = '[]',
                                                   |     lease_preferences = '[]'
  DATABASE system                                  | ALTER DATABASE system CONFIGURE ZONE USING
                                                   |     range_min_bytes = 134217728,
                                                   |     range_max_bytes = 536870912,
                                                   |     gc.ttlseconds = 90000,
                                                   |     num_replicas = 5,
                                                   |     constraints = '[]',
                                                   |     lease_preferences = '[]'
  RANGE meta                                       | ALTER RANGE meta CONFIGURE ZONE USING
                                                   |     range_min_bytes = 134217728,
                                                   |     range_max_bytes = 536870912,
                                                   |     gc.ttlseconds = 3600,
                                                   |     num_replicas = 5,
                                                   |     constraints = '[]',
                                                   |     lease_preferences = '[]'
  RANGE system                                     | ALTER RANGE system CONFIGURE ZONE USING
                                                   |     range_min_bytes = 134217728,
                                                   |     range_max_bytes = 536870912,
                                                   |     gc.ttlseconds = 90000,
                                                   |     num_replicas = 5,
                                                   |     constraints = '[]',
                                                   |     lease_preferences = '[]'
  RANGE liveness                                   | ALTER RANGE liveness CONFIGURE ZONE USING
                                                   |     range_min_bytes = 134217728,
                                                   |     range_max_bytes = 536870912,
                                                   |     gc.ttlseconds = 600,
                                                   |     num_replicas = 5,
                                                   |     constraints = '[]',
                                                   |     lease_preferences = '[]'
  TABLE system.public.replication_constraint_stats | ALTER TABLE system.public.replication_constraint_stats CONFIGURE ZONE USING
                                                   |     gc.ttlseconds = 600,
                                                   |     constraints = '[]',
                                                   |     lease_preferences = '[]'
  TABLE system.public.replication_stats            | ALTER TABLE system.public.replication_stats CONFIGURE ZONE USING
                                                   |     gc.ttlseconds = 600,
                                                   |     constraints = '[]',
                                                   |     lease_preferences = '[]'
(7 rows)

Time: 16.715016ms

```

Given that, it's expected that there would be five replicas, so it makes sense that with two nodes down, these ranges are under-replicated.

> n4 and n5 were “suspect” by 17:36Z and “dead” by 17:41Z. Why did CockroachDB decide at 17:51Z to rebalance ranges from n3 onto these dead nodes? Does it not take into account that a node is dead before rebalancing?

These timestamps were from the day before, when the nodes were probably up.

> How is it possible that the replication apparently succeeded for n5 when that node was offline?

Again, these timestamps were from the day before, when the nodes were probably up.

> Why is that that the latest range descriptor in the log has all five nodes in it, but we only see three columns in the range report? Are there really five replicas and we don’t see those columns because the other two nodes are down?

I don't have more information about this, but I suspect my guess is right there, that it just doesn't show columns from nodes that are down.  When I brought the nodes back up, the columns showed up.  When I temporarily bring down n4 again, the column disappears again.  When I bring it back, the column comes back.

> In other words, maybe this is under-replicated not because there aren’t 3 (the replication factor), but because there are five, but two of them are on dead nodes? If that’s true, is there operationally a way to distinguish between replicas that are under-replicated because they’re under the replication factor vs. under-replicated because there are some dead replicas?

The premise for this question is no longer valid -- the replication factor _is_ 5.

> Relatedly, is there a way to know operationally how many under-replicated ranges are not making forward progress (e.g., because they require another node to be up)?

I think this is a valid question.

New questions:

* Is there a way to determine what zone a range is part of?  The best way I know now is to figure out what database/table it's part of (for which I think there may be a reverse index, in the Admin UI, if you browse the databases/tables?), and then use `show zone configurations`.  You can also do the first part with `SHOW RANGES FROM ...`

I wrote a new post on the CockroachDB forum.

I ran out of time today -- got distracted with other things.

== 2020-09-18

Plan: basically same as 9/16, but try to do it right this time.

* check on the https://forum.cockroachlabs.com/t/understanding-under-replicated-ranges/3982[CockroachDB forum thread I created].
* drop and recreate previous sysbench database
* disable db3, db4 to get back to a 3-node cluster
* ramp up workload:
** start one load generator for each db node, about 10 minutes apart
* expand cluster, one node at a time, about 10 minutes apart

Details:

15:26Z: cluster started
15:34Z: shut down nodes db3 and db4.  Both timed out and where forcibly killed by SMF.  As we'd expect, we have 33 under-replicated ranges -- presumably all system ranges.
15:45Z: started sysbench workload from one client:

[source,text]
----
sysbench --threads=1 --time=0 --pgsql-host=192.168.1.227 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert prepare
...
sysbench --threads=1 --time=0 --pgsql-host=192.168.1.227 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert run
----

15:55Z: started sysbench workload from second client (now two workloads running):

[source,text]
----
sysbench --threads=1 --time=0 --pgsql-host=192.168.1.66 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert run
----

16:05Z: started sysbench workload from third client (now three workloads running):

[source,text]
----
sysbench --threads=1 --time=0 --pgsql-host=192.168.1.214 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert run
----

I let this run for a few hours and ran into a few issues.  In the second and third load generators, sysbench reported:

[source,text]
----
client_loop: send disconnect: Broken pipe
----

This appeared to happen at 18:05Z and 18:15Z, based on the throughput graphs.

From about 16:10 to about 18:05Z, throughput was well-distributed across the nodes at about 280 total inserts per second.  There was plenty of CPU headroom and disks topped out around 75% busy.  p95 was steady around 16ms, p99 ranged from 18-40ms.  It's not at all clear what caused the client issues.  There was a tiny blip in "exec_error" around 18:05, but none around 18:15.  p99 heatbeat latency did spike a few times to almost 4s, including two spikes to 2.7s around 18:12:30 and 18:15.  Both of those were on .214, which is db2 (n3).  That's what the third load generator was talking to.

Checked that CockroachDB has not restarted on either of those nodes.

[source,text]
----
192.168.1.66  db1 == n3 workload failed at 18:05
192.168.1.214 db2 == n2 workload failed at 18:15
----

Interesting that they started 10 minutes apart and failed 10 minutes apart,
just about 2h10m after starting.


Next step: check logs.  On db1, this would be around 18:05.  This looks surprising from the log:

[source,text]
----
W200918 18:04:53.861971 1762946 vendor/google.golang.org/grpc/internal/channelz/logging.go:73  grpc: addrConn.createTransport failed to connect to {192.168.1.103:26257  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 192.168.1.103:26257: connect: connection refused". Reconnecting...
W200918 18:04:53.862255 1762949 vendor/google.golang.org/grpc/internal/channelz/logging.go:73  grpc: addrConn.createTransport failed to connect to {192.168.1.152:26257  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing dial tcp 192.168.1.152:26257: connect: connection refused". Reconnecting...
W200918 18:04:54.862449 1762949 vendor/google.golang.org/grpc/internal/channelz/logging.go:73  grpc: addrConn.createTransport failed to connect to {192.168.1.152:26257  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing cannot reuse client connection". Reconnecting...
W200918 18:04:54.862545 1762946 vendor/google.golang.org/grpc/internal/channelz/logging.go:73  grpc: addrConn.createTransport failed to connect to {192.168.1.103:26257  <nil> 0 <nil>}. Err: connection error: desc = "transport: Error while dialing cannot reuse client connection". Reconnecting...
----

Note that .103 and .152 are other cockroachdb server nodes: n5 and n4, respectively.  Those should both be offline -- and they are, and have been since 15:35Z.  Why those messages then?  Actually, these seem to be spat out every 30 seconds ro so.  So this is probably a red herring.

I just realized that the `client_loop` error may have come from `ssh` -- around 11:05am PT and 11:15am PT.  I'm not sure why it would have affected those two and not the other load generator, and at different times, too.  I don't see anything too correlated in the system log on the load generator:

[source,text]
----
Sep 18 18:08:16 loadgen0 sshd[2335]: [ID 800047 auth.error] error: kex_exchange_identification: Connection closed by remote host
Sep 18 18:24:10 loadgen0 sshd[2610]: [ID 800047 auth.error] error: kex_exchange_identification: Connection closed by remote host
----

Obvious sources would be:

- NAT state drop in my home router.  (No log message in the remote side?)
- NAT state drop inside AWS?

but why not the first ssh session?  Maybe I should use ServerAliveInterval to keep these open.

Anyway, there's no indication of a CockroachDB problem here.  I'm going to restart the two workloads.

20:44Z: restarted those two workloads
20:59:24: brought up cockroachdb on db3.
22:15Z: brought up cockroachdb on db4
23:12Z: brought up cockroachdb on db5
23:35Z: start load generators pointed at db3, db4, db5

Summary of results:

* When I brought up db3 at 20:59: there was a spike in p95 latency to over 40ms (from about 18ms) and a brief dip in throughput from about 280 qps to about 70 (but the period was so short that that time average is probably not meaningful).  After that, p95 latency was slightly lower than before, and throughput was slightly better (about 320qps).
* When I brought up db4 at 22:15Z: throughput shot up to about 460qps.  p95 latency improved accordingly.
* When I brought up db5 at 23:12Z, there was another spike in latency and brief dip in throughput, after which they were both about the same as before.  However, three nodes were still processing 0 requests.
* When I brought up the extra three load generators at 23:35Z, request throughput evened out across all six nodes.  Overall throughput increased a fair bit, but it's ranged from 620-750qps -- not super consistent yet (as of 23:53Z).

Through all of this:

* CPU utilization on all CPUs has been below 80%.
* There have been two disk %busy spikes over 75%, both very brief -- mostly they've been below 65%.
* Average disk I/O time has largely been under 1ms, with a few spikes as high as 15ms or so.  (Interestingly, that 15ms outlier correlates with 5ms spent queued in the device driver, which is very rare -- that generally doesn't exceed a few tens of microseconds.)
* p99 CockroachDB heartbeat latency has peaked at around 850ms, correlated with an 800ms spike in p99 round-trip latency around that time.
* The error rate has peaked at about 3 per second.  It's largely been zero, with spikes around 2100Z, 22:05Z, 22:15Z, 23:15Z.  The biggest spikes have been around when we bring up new nodes.  I'm not sure I'm looking at SQL errors though -- these might all be internal errors.

This has been good operational experience playing around with these operations, but feels a bit unfocused.

---

Stepping back, here are a few things I would like to better understand:

* What's the performance impact of making write requests to the leaseholder of a range vs. one of the other nodes with a replica vs. one of the other nodes in the cluster?
* How does that inform the best way to do basic load testing?
* When is splitting better for load?  When is merging better?  How can you tell from the metrics?

Is it worth trying to demonstrate horizontal scalability by starting up, say, 6 load generators pointing at a 3-node cluster, then expanding it to 6 nodes?  (Or, equivalently? starting 6 load generators, each pointing to a node in the 6-node cluster I already have, and then gradually repointing a load generator at one of the first three as I remove the last three nodes?)

It might be worth stepping back to better understand what we'd really like to know, which is probably something like:

* how is a moderately heavy read-write workload affected when one node disappears
** for just a minute?
** for a while (at least long enough for the cluster to rebalance)?
** immediately after that node comes back?
** for an extended period after that node comes back (long enough for the cluster to rebalance)
 In particular, I think we want to know the change in throughput, tail latency, and errors.
* how does a moderately heavy read-write workload run for an extended period (at least 24h, maybe a week)
* similar questions for a few different actions:
** kill -9 a node
** OS panic a node
** hardware reset a node
** decommission a node
** drain a node
** introduce a partition around a node
*** for just a little while
*** for an extended period

Next steps:

* Make sure I know how to monitor SQL errors.
* Figure out tests to answer my questions above.


== 2020-09-21

Summary of the day:

* Reviewed how reads and writes work in CockroachDB.  Tested this out to see how being a leaseholder affects throughput on that node.
* Dug into load-based splitting and merging to understand the impact.
* Dug a bit deeper into the metrics.  I know how to look for SQL failures now, as well as how to see splits and merges.
* Revised README in this repo to reflect the work done so far and where to go from here.

Details:

The https://www.cockroachlabs.com/docs/v20.1/architecture/reads-and-writes-overview[architectural overview of reads and writes] explains that issuing reads or writes to the leaseholder of a range should avoid one internal network round-trips.  From my read, it wouldn't matter if you issued the request to a different node holding a replica for the range or not, as long as it wasn't the leaseholder.  One idea would be to try to empirically measure this, but I'm not sure how useful that is.

Found and skimmed the https://wiki.crdb.io/wiki/spaces/CRDB/overview?homepageId=56197319[CRDB wiki] (got here looking for suggestions for performance testing).

Plan for today:

* Make sure I know how to monitor SQL errors.
* Restart cluster.  Drop sbtest database and recreate it.
* Start the workload and run it for like 10 minutes.  Figure out what range it's working on.  Figure out where the leaseholder for that range is.  Run the query for about 5 minutes each a few times on the leaseholder, another replica, and another cluster node.
* Dig into when merging vs. splitting is better for load.

Details:

* Restarted cluster.  All nodes came up fine.
* Dropped and recreated database "sbtest".  Looked at ranges:

[source,text]
----
> show ranges from database sbtest;
  table_name | start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
-------------+-----------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  sbtest1    | NULL      | NULL    |      115 |      2.151715 |            6 |                       | {4,5,6}  | {"","",""}
  sbtest1    | NULL      | NULL    |      116 |      0.329636 |            6 |                       | {4,5,6}  | {"","",""}
(2 rows)

Time: 17.045268ms
----

There are two ranges (one for the table and one for the index?), both on leaseholder 6 (presumably n6, which is 192.168.1.190) and with replicas on nodes 4 and 5 (presumably n4 and n5, which are 192.168.1.152 and 192.168.1.103, respectively).

For good measure, let's confirm our understanding of those ranges:

[source,text]
----
root@192.168.1.227:26257/sbtest> SHOW TABLES;
  schema_name | table_name | type
--------------+------------+--------
  public      | sbtest1    | table
(1 row)

Time: 8.173483ms

root@192.168.1.227:26257/sbtest> SHOW INDEXES FROM sbtest1;
  table_name | index_name | non_unique | seq_in_index | column_name | direction | storing | implicit
-------------+------------+------------+--------------+-------------+-----------+---------+-----------
  sbtest1    | primary    |   false    |            1 | id          | ASC       |  false  |  false
  sbtest1    | k_1        |    true    |            1 | k           | ASC       |  false  |  false
  sbtest1    | k_1        |    true    |            2 | id          | ASC       |  false  |   true
(3 rows)

Time: 8.326325ms

root@192.168.1.227:26257/sbtest> SHOW RANGES FROM TABLE sbtest1;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      115 |      2.151715 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 12.654598ms

root@192.168.1.227:26257/sbtest> SHOW RANGES FROM INDEX sbtest1 @ k_1;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      116 |      0.329636 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 13.490146ms
----

Good.

Now, let's run workloads in the following sequence:

- n6: 5 minutes (leaseholder)
- n5: 5 minutes (non-leaseholder replica)
- n3: 5 minutes (non-replica)
- n2: 5 minutes (non-replica)
- n4: 5 minutes (non-leaseholder replica)
- n6: 5 minutes (leaseholder)

Basic command:

[source,text]
----
sysbench --threads=1 --time=0 --pgsql-host=192.168.1.214 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_insert run
----

So that suggests:

[source,bash]
----
n2=192.168.1.214
n3=192.168.1.66
n4=192.168.1.152
n5=192.168.1.103
n6=192.168.1.190

set -o errexit

for host in $n6 $n5 $n3 $n2 $n4 $n6; do
	echo "host: $host"
	sysbench --threads=1 --time=300 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest --pgsql-host=$n6 oltp_insert run
	sleep 60
done
----

Result:

[source,text]
----
$ bash load.sh
2020-09-21T18:03:57Z: host: 192.168.1.190
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 1
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           37102
        other:                           0
        total:                           37102
    transactions:                        37102  (123.67 per sec.)
    queries:                             37102  (123.67 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      123.6707
    time elapsed:                        300.0063s
    total number of events:              37102

Latency (ms):
         min:                                    3.19
         avg:                                    8.08
         max:                                  124.42
         95th percentile:                       10.65
         sum:                               299930.37

Threads fairness:
    events (avg/stddev):           37102.0000/0.00
    execution time (avg/stddev):   299.9304/0.00

2020-09-21T18:09:57Z: host: 192.168.1.103
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 1
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           37414
        other:                           0
        total:                           37414
    transactions:                        37414  (124.71 per sec.)
    queries:                             37414  (124.71 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      124.7104
    time elapsed:                        300.0071s
    total number of events:              37414

Latency (ms):
         min:                                    3.86
         avg:                                    8.02
         max:                                   78.27
         95th percentile:                       10.84
         sum:                               299932.03

Threads fairness:
    events (avg/stddev):           37414.0000/0.00
    execution time (avg/stddev):   299.9320/0.00

2020-09-21T18:15:57Z: host: 192.168.1.66
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 1
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           37399
        other:                           0
        total:                           37399
    transactions:                        37399  (124.66 per sec.)
    queries:                             37399  (124.66 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      124.6603
    time elapsed:                        300.0074s
    total number of events:              37399

Latency (ms):
         min:                                    3.53
         avg:                                    8.02
         max:                                   68.68
         95th percentile:                       10.46
         sum:                               299931.79

Threads fairness:
    events (avg/stddev):           37399.0000/0.00
    execution time (avg/stddev):   299.9318/0.00

2020-09-21T18:21:57Z: host: 192.168.1.214
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 1
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           37366
        other:                           0
        total:                           37366
    transactions:                        37366  (124.55 per sec.)
    queries:                             37366  (124.55 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      124.5527
    time elapsed:                        300.0014s
    total number of events:              37366

Latency (ms):
         min:                                    3.88
         avg:                                    8.03
         max:                                   71.34
         95th percentile:                       11.04
         sum:                               299926.44

Threads fairness:
    events (avg/stddev):           37366.0000/0.00
    execution time (avg/stddev):   299.9264/0.00

2020-09-21T18:27:57Z: host: 192.168.1.152
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 1
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           37428
        other:                           0
        total:                           37428
    transactions:                        37428  (124.76 per sec.)
    queries:                             37428  (124.76 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      124.7568
    time elapsed:                        300.0076s
    total number of events:              37428

Latency (ms):
         min:                                    4.07
         avg:                                    8.01
         max:                                   75.42
         95th percentile:                       11.04
         sum:                               299932.50

Threads fairness:
    events (avg/stddev):           37428.0000/0.00
    execution time (avg/stddev):   299.9325/0.00

2020-09-21T18:33:57Z: host: 192.168.1.190
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 1
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           37273
        other:                           0
        total:                           37273
    transactions:                        37273  (124.24 per sec.)
    queries:                             37273  (124.24 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      124.2423
    time elapsed:                        300.0024s
    total number of events:              37273

Latency (ms):
         min:                                    3.31
         avg:                                    8.05
         max:                                   58.86
         95th percentile:                       10.27
         sum:                               299926.12

Threads fairness:
    events (avg/stddev):           37273.0000/0.00
    execution time (avg/stddev):   299.9261/0.00

----

After running this (which took about 40 minutes):

* the requests were indeed handled by different nodes
* the throughput was reasonably constant (125 inserts / second) regardless of which node we were using
* It appeared that there was a merge at some point between ranges 115 and 116, because there's only one range associated with "sbtest" now and it's range 115.  It's still held on n6 with replicas on 4, 5, and 6.  From the metrics, the merge happened at about 18:45:30Z, which is after the last experiment.
* Disk utilization was basically the same through all runs, and about 2x higher on db5 (n6) than all other nodes.  That's largely true for CPU utilization as well, though it bounced around a bit between nodes in different runs.
* db3, db4, and db5 were consistently doing about 1K write IOPS, while the other nodes were doing basically none.
* There was less network traffic when n6 was being hit.

It seems like maybe the network round-trip was not the blocker.  That makes sense, as the p50 network RTT is about 800us.  p99 spiked up to at most 15ms.  By comparison, p95 SQL latency was about 10ms, with p99 about 18ms.

Let's try the same thing with concurrency=4 to minimize the impact of waiting on the client.  I'm not going to wipe the database before this run.

Results from this sequence:

[source,text]
----
cockroachdb@loadgen0:~$ bash load.sh
2020-09-21T20:02:11Z: host: 192.168.1.190
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           255401
        other:                           0
        total:                           255401
    transactions:                        255401 (851.33 per sec.)
    queries:                             255401 (851.33 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      851.3275
    time elapsed:                        300.0032s
    total number of events:              255401

Latency (ms):
         min:                                    2.16
         avg:                                    4.70
         max:                                   56.52
         95th percentile:                        7.84
         sum:                              1199501.13

Threads fairness:
    events (avg/stddev):           63850.2500/25.78
    execution time (avg/stddev):   299.8753/0.00

2020-09-21T20:08:11Z: host: 192.168.1.103
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           210668
        other:                           0
        total:                           210668
    transactions:                        210668 (702.22 per sec.)
    queries:                             210668 (702.22 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      702.2183
    time elapsed:                        300.0036s
    total number of events:              210668

Latency (ms):
         min:                                    2.81
         avg:                                    5.69
         max:                                   63.35
         95th percentile:                        8.43
         sum:                              1199577.67

Threads fairness:
    events (avg/stddev):           52667.0000/214.72
    execution time (avg/stddev):   299.8944/0.00

2020-09-21T20:14:11Z: host: 192.168.1.66
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           223659
        other:                           0
        total:                           223659
    transactions:                        223659 (745.52 per sec.)
    queries:                             223659 (745.52 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      745.5164
    time elapsed:                        300.0055s
    total number of events:              223659

Latency (ms):
         min:                                    2.69
         avg:                                    5.36
         max:                                   66.33
         95th percentile:                        7.98
         sum:                              1199545.61

Threads fairness:
    events (avg/stddev):           55914.7500/84.28
    execution time (avg/stddev):   299.8864/0.00

2020-09-21T20:20:11Z: host: 192.168.1.214
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           218966
        other:                           0
        total:                           218966
    transactions:                        218966 (729.88 per sec.)
    queries:                             218966 (729.88 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      729.8776
    time elapsed:                        300.0037s
    total number of events:              218966

Latency (ms):
         min:                                    2.82
         avg:                                    5.48
         max:                                   71.20
         95th percentile:                        7.98
         sum:                              1199569.89

Threads fairness:
    events (avg/stddev):           54741.5000/63.66
    execution time (avg/stddev):   299.8925/0.00

2020-09-21T20:26:11Z: host: 192.168.1.152
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           212824
        other:                           0
        total:                           212824
    transactions:                        212824 (709.40 per sec.)
    queries:                             212824 (709.40 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      709.4044
    time elapsed:                        300.0038s
    total number of events:              212824

Latency (ms):
         min:                                    2.72
         avg:                                    5.64
         max:                                   72.86
         95th percentile:                        8.28
         sum:                              1199565.97

Threads fairness:
    events (avg/stddev):           53206.0000/86.02
    execution time (avg/stddev):   299.8915/0.00

2020-09-21T20:32:11Z: host: 192.168.1.190
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            0
        write:                           258800
        other:                           0
        total:                           258800
    transactions:                        258800 (862.65 per sec.)
    queries:                             258800 (862.65 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      862.6541
    time elapsed:                        300.0044s
    total number of events:              258800

Latency (ms):
         min:                                    2.21
         avg:                                    4.63
         max:                                  115.68
         95th percentile:                        7.70
         sum:                              1199494.31

Threads fairness:
    events (avg/stddev):           64700.0000/72.58
    execution time (avg/stddev):   299.8736/0.00

----

In this run, we did see a clear difference between writes to the leaseholder vs. writes to other nodes, with no real difference among the other nodes.  Summary:

[source,text]
----
RAW RESULTS (5-minute average TPS, from raw output above):

    192.168.1.190 851.3275
    192.168.1.103 702.2183
    192.168.1.66  745.5164
    192.168.1.214 729.8776
    192.168.1.152 709.4044
    192.168.1.190 862.65

BY NODE:

    IP             NODE  ROLE        TPS (multiple runs)
    192.168.1.190  n6    leaseholder 863 851
    192.168.1.103  n5    replica     702
    192.168.1.66   n3    general     746
    192.168.1.214  n2    general     730
    192.168.1.152  n4    replica     709

BY ROLE ONLY:

    ROLE        TPS (multiple runs)
    leaseholder 863 851
    replica     702 709
    general     746 730

----

Indeed, the leaseholder performs at least 14% - 23% better than the other nodes.  Surprisingly, replicas do a bit worse than non-replicas.

Other notes from this experiment:

* The throughput-per-node graph confirms that we hit different nodes.
* Disk %busy remained at or below 60% on all nodes, with n6 by far being the busiest (as before).  Plenty of headroom in that sense.
* CPU utilization remained at or below about 60% on all CPUs, so plenty of headroom there.
* As before, the three replica nodes were pegged at about 1K write IOPS, with no read IOPS going on and no activity on the other three nodes.
* We were much better at keeping the pipeline full: the average active queries remained above 2 for the duration, with few exceptions.

Finally, check on the ranges to make sure they didn't change during the test:

[source,text]
----
root@192.168.1.227:26257/sbtest> show ranges from table sbtest1;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      115 |    400.569721 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 11.999547ms

root@192.168.1.227:26257/sbtest> show ranges from index sbtest1 @ primary;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      115 |    400.569721 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 12.867224ms

root@192.168.1.227:26257/sbtest> show ranges from index sbtest1 @ k_1;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      115 |    400.569721 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 12.278072ms

root@192.168.1.227:26257/sbtest> show ranges from database sbtest;
  table_name | start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
-------------+-----------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  sbtest1    | NULL      | NULL    |      115 |    400.569721 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 10.485938ms
----

That looks good -- same state as before.

=== Read performance against leaseholder vs. replica vs. other

Now, I want to try the same experiment again for a read-heavy workload.  I've modified the script to run `oltp_point_select` instead of `oltp_insert`:

[source,bash]
----
#!/bin/bash

n2=192.168.1.214
n3=192.168.1.66
n4=192.168.1.152
n5=192.168.1.103
n6=192.168.1.190

set -o errexit

for host in $n6 $n5 $n3 $n2 $n4 $n6; do
        echo "$(date +%FT%TZ): host: $host"
        sysbench --threads=4 --time=300 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest --pgsql-host=$host oltp_point_select run
        sleep 60
done
----

To run this, I'm going to drop the database first and recreate it, which means re-checking the ranges:

[source,text]
----
$ sysbench --threads=1 --time=0 --pgsql-host=192.168.1.227 --pgsql-port=26257 --pgsql-user=root --pgsql-db=sbtest oltp_point_select prepare
WARNING: Both event and time limits are disabled, running an endless test
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Creating table 'sbtest1'...
Inserting 10000 records into 'sbtest1'
Creating a secondary index on 'sbtest1'...
cockroachdb@loadgen0:~$ 
----

Here are the resulting schemas and ranges:

[source,text]
----
root@192.168.1.227:26257/defaultdb> SHOW RANGES FROM DATABASE sbtest;
  table_name | start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
-------------+-----------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  sbtest1    | NULL      | NULL    |      117 |      2.151715 |            6 |                       | {4,5,6}  | {"","",""}
  sbtest1    | NULL      | NULL    |      118 |      0.329636 |            6 |                       | {4,5,6}  | {"","",""}
(2 rows)

Time: 12.807122ms

root@192.168.1.227:26257/defaultdb> use sbtest;
SET

Time: 3.329146ms

root@192.168.1.227:26257/sbtest> show ranges from table sbtest1;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      117 |      2.151715 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 13.086509ms

root@192.168.1.227:26257/sbtest> show ranges from index sbtest1 @ primary;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      117 |      2.151715 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 12.772464ms

root@192.168.1.227:26257/sbtest> show ranges from index sbtest1 @ k_1;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      118 |      0.329636 |            6 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 12.971536ms

root@192.168.1.227:26257/sbtest> SHOW TABLES;
  schema_name | table_name | type
--------------+------------+--------
  public      | sbtest1    | table
(1 row)

Time: 8.281401ms

root@192.168.1.227:26257/sbtest> show index from sbtest1;
  table_name | index_name | non_unique | seq_in_index | column_name | direction | storing | implicit
-------------+------------+------------+--------------+-------------+-----------+---------+-----------
  sbtest1    | primary    |   false    |            1 | id          | ASC       |  false  |  false
  sbtest1    | k_1        |    true    |            1 | k           | ASC       |  false  |  false
  sbtest1    | k_1        |    true    |            2 | id          | ASC       |  false  |   true
(3 rows)

Time: 8.101588ms

----

We got new ranges, but they're on the same nodes, with the same leaseholder, so we can use the same load.sh script (changing the workload).

Here are the detailed results:

[source,text]
----
$ time bash load.sh
2020-09-21T20:59:58Z: host: 192.168.1.190
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            1383060
        write:                           0
        other:                           0
        total:                           1383060
    transactions:                        1383060 (4610.17 per sec.)
    queries:                             1383060 (4610.17 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      4610.1706
    time elapsed:                        300.0019s
    total number of events:              1383060

Latency (ms):
         min:                                    0.48
         avg:                                    0.87
         max:                                   41.97
         95th percentile:                        1.39
         sum:                              1199127.44

Threads fairness:
    events (avg/stddev):           345765.0000/447.71
    execution time (avg/stddev):   299.7819/0.00

2020-09-21T21:05:58Z: host: 192.168.1.103
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            689759
        write:                           0
        other:                           0
        total:                           689759
    transactions:                        689759 (2299.18 per sec.)
    queries:                             689759 (2299.18 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      2299.1810
    time elapsed:                        300.0020s
    total number of events:              689759

Latency (ms):
         min:                                    0.94
         avg:                                    1.74
         max:                                   32.18
         95th percentile:                        2.39
         sum:                              1199594.98

Threads fairness:
    events (avg/stddev):           172439.7500/269.51
    execution time (avg/stddev):   299.8987/0.00

2020-09-21T21:11:58Z: host: 192.168.1.66
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            1380248
        write:                           0
        other:                           0
        total:                           1380248
    transactions:                        1380248 (4600.80 per sec.)
    queries:                             1380248 (4600.80 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      4600.8011
    time elapsed:                        300.0017s
    total number of events:              1380248

Latency (ms):
         min:                                    0.48
         avg:                                    0.87
         max:                                   31.00
         95th percentile:                        1.39
         sum:                              1199145.44

Threads fairness:
    events (avg/stddev):           345062.0000/813.18
    execution time (avg/stddev):   299.7864/0.00

2020-09-21T21:17:58Z: host: 192.168.1.214
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            649948
        write:                           0
        other:                           0
        total:                           649948
    transactions:                        649948 (2166.48 per sec.)
    queries:                             649948 (2166.48 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      2166.4816
    time elapsed:                        300.0016s
    total number of events:              649948

Latency (ms):
         min:                                    0.96
         avg:                                    1.85
         max:                                   37.94
         95th percentile:                        2.57
         sum:                              1199618.76

Threads fairness:
    events (avg/stddev):           162487.0000/99.93
    execution time (avg/stddev):   299.9047/0.00

2020-09-21T21:23:58Z: host: 192.168.1.152
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            692496
        write:                           0
        other:                           0
        total:                           692496
    transactions:                        692496 (2308.30 per sec.)
    queries:                             692496 (2308.30 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      2308.3036
    time elapsed:                        300.0021s
    total number of events:              692496

Latency (ms):
         min:                                    0.94
         avg:                                    1.73
         max:                                  114.17
         95th percentile:                        2.39
         sum:                              1199590.33

Threads fairness:
    events (avg/stddev):           173124.0000/235.70
    execution time (avg/stddev):   299.8976/0.00

2020-09-21T21:29:58Z: host: 192.168.1.190
sysbench 1.1.0-bbee5d5 (using bundled LuaJIT 2.1.0-beta3)

Running the test with following options:
Number of threads: 4
Initializing random number generator from current time


Initializing worker threads...

Threads started!

SQL statistics:
    queries performed:
        read:                            724305
        write:                           0
        other:                           0
        total:                           724305
    transactions:                        724305 (2414.32 per sec.)
    queries:                             724305 (2414.32 per sec.)
    ignored errors:                      0      (0.00 per sec.)
    reconnects:                          0      (0.00 per sec.)

Throughput:
    events/s (eps):                      2414.3216
    time elapsed:                        300.0035s
    total number of events:              724305

Latency (ms):
         min:                                    0.93
         avg:                                    1.66
         max:                                   35.97
         95th percentile:                        2.22
         sum:                              1199568.27

Threads fairness:
    events (avg/stddev):           181076.2500/116.19
    execution time (avg/stddev):   299.8921/0.00


real    36m0.207s
user    0m48.721s
sys     1m44.241s
----

Check range status:

[source,text]
----
root@192.168.1.227:26257/sbtest> show ranges from table sbtest1;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      117 |      2.151715 |            3 |                       | {3,5,6}  | {"","",""}
(1 row)

Time: 121.712751ms

root@192.168.1.227:26257/sbtest>  show ranges from index sbtest1 @ primary;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      117 |      2.151715 |            3 |                       | {3,5,6}  | {"","",""}
(1 row)

Time: 13.173433ms

root@192.168.1.227:26257/sbtest> show ranges from index sbtest1 @ k_1;
  start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
------------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  NULL      | NULL    |      118 |      0.329636 |            4 |                       | {4,5,6}  | {"","",""}
(1 row)

Time: 14.280008ms

root@192.168.1.227:26257/sbtest> SHOW ranges from database sbtest;
  table_name | start_key | end_key | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
-------------+-----------+---------+----------+---------------+--------------+-----------------------+----------+---------------------
  sbtest1    | NULL      | NULL    |      117 |      2.151715 |            3 |                       | {3,5,6}  | {"","",""}
  sbtest1    | NULL      | NULL    |      118 |      0.329636 |            4 |                       | {4,5,6}  | {"","",""}
(2 rows)

Time: 13.843042ms
----

Unfortunately, this output means that range 117's lease was moved to n3 -- which explains some of the results I got:

[source,text]
----
NODE               QPS   STARTED AT
n6   192.168.1.190 4610  20:59:58Z
n5   192.168.1.103 2299  21:05:58Z
n3   192.168.1.66  4601  21:11:58Z
n2   192.168.1.214 2166  21:17:58Z
n4   192.168.1.152 2308  21:23:58Z
n6   192.168.1.190 2414  21:29:58Z 
----

(That's pulled out of the output above by hand.)

Based on the metrics in the Admin UI, I believe we have:

[source,text]
----
21:00:00 split, add, remove, load-based lease transfer
21:05:30 split, add, remove, lease transfer (non-load-based)
21:12:00 split + load-based lease transfer
21:17:30 range merge
----

It's a little hard to know what happened there.  Let's take a closer look at ranges 117 and 118.

Range 117:

[source,text]
----
20:57:17Z split 115 -> 117
20:57:20Z split 117 -> 118
21:00:00Z split 117 -> 119
21:00:21Z add n3, remove n4 (reason: rebalance)
21:05:52Z merge r117 with r119 (this is the first event labeled for store "s3" instead of "s6")
21:12:09Z split r117 into r135
21:17:27Z merge r117 with r135
21:57:24Z merge r117 with 4118
----

If we look at the lease history there, we see it on n6 from 17:42:08 to 21:01:23.  Reading between the lines, it seems like we split the range around 21:00 and moved the lease to n3.  My guess is that we split the range due to load and then moved one of the two halves to another node, and this was the half that got moved.

If we merge this timeline with our results above, we have:

[source,text]
----
NODE               QPS   STARTED AT  ROLE
n6   192.168.1.190 4610  20:59:58Z   initially leaseholder, changed to replica while running
n5   192.168.1.103 2299  21:05:58Z   replica
n3   192.168.1.66  4601  21:11:58Z   leaseholder
n2   192.168.1.214 2166  21:17:58Z   general
n4   192.168.1.152 2308  21:23:58Z   replica
n6   192.168.1.190 2414  21:29:58Z   replica
----

The trend remains fairly clear that reads from the leaseholder are quite a lot faster than from other nodes in the cluster.  This experiment is as controlled as we'd like, and we could potentially improve it by disabling load-based splitting or rebalancing, but this is consistent enough with the documentation that it's probably not worth exploring further.

=== Notes on performance, splits, and merges

Meanwhile: looking at https://www.cockroachlabs.com/docs/stable/load-based-splitting.html[load-based splitting] again.  It seems the main purpose is take a range that's hot, but where the load is distributed across at least two keys, and split it into two ranges that can then be https://www.cockroachlabs.com/docs/v20.1/architecture/replication-layer#load-based-replica-rebalancing[rebalanced] onto other nodes so that the load is split between two nodes.  According to that first source, CockroachDB won't split a range on which queries would have to hit both ranges after the split, since that's more expensive.

What about https://www.cockroachlabs.com/docs/stable/range-merges.html[merges]?  It looks like Cockroach only merges ranges based on size, not load.  This behavior does improve performance because the fewer ranges a query has to deal with, the fewer network round-trip times and other per-range overhead costs are needed, plus it's less likely to hit a non-functional or overloaded node.

It looks to me that if a workload is heavily concentrated on one key, splitting can't help.  You'll be limited to the capacity of a single node -- but in principle that entire node can be dedicated to that key, if it's really that hot.

I asked above how one can tell of splitting or merging will be good for performance.  I'm not sure there's an easy way to tell.  I do not see a great way to look at queries per range.  You _can_ look at range size, which will tell you when something might be a candidate for merging.

I decided to take a closer look at the metrics available -- there's lots of good stuff here, including pending merges and splits, etc.  New question, though: what's the difference between sql_exec_latency (SQL "statement" execution) and sql_service_latency (SQL "request" execution)?  I don't see any metrics with "range" as a label, so I don't think you can get queries per range out of Prometheus.

=== Next steps

Tactical steps:

* update dashboards
** show sql_exec_failures
** add graph of range splits, merges, etc.
* go through my notes up to this point and see if there are unexplained issues that need to be noted for further investigation (or just marked caveats)

The experiments from the last few days have helped me come to ground on some of my questions about testing from 9/18:

* Performance _does_ differ depending on whether the gateway node (that receives the request) is the leaseholder or not.  This means that performance can easily change during an experiment as CockroachDB splits ranges, merges them, and moves them as part of rebalancing.
* I don't fully understand haproxy's load balancing behavior well enough to rely on it during testing.  As a result, I'm pointing each load generator at individual CockroachDB nodes.  This too complicates testing things like horizontal scalability (increased throughput as the cluster expands), since we have to add or redirect load generators in order to use new capacity.

I revised the README to reflect the bigger directions we want to think about.

== 2020-09-22

Summary of the day:

* updated dashboard.
** show sql_exec_failures.
** add graph of range splits, merges, etc.
** add graph of queries by store.
* went through my notes up to this point and collected outstanding issues.  Added these to the README list.
* Completed an "online expansion" experiment that went well, but was limited.  See Conclusions below.
* Completed an "online contraction" experiment that went well, but was limited.  See Conclusions below.
* Started creating a much bigger database.

=== Summary of online expansion experiment

[source,text]
----
17:06Z Deployed a fresh cluster: 6 VMs, only started CockroachDB on 3 of them.
17:26Z Started 50% read / 50% write "kv" workload against db1 (n1)
17:34Z Started 50% read / 50% write "kv" workload against db2 (n2)
17:39Z Started 50% read / 50% write "kv" workload against db3 (n3)
18:05Z Bring up db4.  Rebalancing visible until about 18:06Z.
18:19Z Bring up db5.  Rebalancing visible until about 18:21Z.
19:54Z Bring up db6.  Rebalancing visible until about 19:56Z.
20:25Z End of experiment -- writing up summary.
----

Summary of impact:

* Throughput:
** Aggregate throughput started around 2500 qps (evenly split between "select" and "insert") and declined over about 90 minutes to about 2000 qps.
** Throughput on db1 is consistently about 15% higher than the other two nodes, which are about equal.  This is consistent with db1 being the leaseholder for the ranges being queried.  I confirmed via Admin UI that db1 is seeing nearly all of the queries.
** For the entire period, across all three load generators, throughput reported is 441+336+344 reads per second and 442+336+344 writes per second, which is 1121 total reads per second and 1122 writes per second, or 2243 queries per second.  Grafana reports 2,176 queries per second (from the server) for the same period (1,088 reads and 1,099 writes) -- it's good that these are consistent.
* Latency:
** Matches what you'd expect given the throughput graph.
** p95 latency for db1 is slightly better than the other two, which are about the same.  p95 ranges from about 8ms-11ms.  p99 has one major outlier from db1 up to 1.3s around 18:47Z.  There are two other excursions to 60ms and 160ms.  Ignoring these three, p99 ranged from about 14ms - 18ms, quite consistently, with db1 being slightly better than the other two.
* Errors:
** CockroachDB reported zero SQL failures.
** All three client load generators reported zero errors.
* Utilization and saturation
** CPU: the busiest CPUs were the two CPUs on db1, which are about 80-88% busy.  The other nodes are around 40% or less busy.
** Disk: average I/O time saw one excursion up to 4.7ms and a few up to 2ms, but averaged under 600us.  Disks got less busy over time, starting around 65% busy on db1 at the beginning and falling to about 45-50% busy.  Average write throughput is only about 2-3 MBps per node -- it's not a heavy workload.  We're hitting the max write IOPS of 1K most of the time on db1 and db2.  Other nodes are less busy.
** Network: throughput is fairly minimal (averaging under 1 MBps on all nodes).
* Other notes:
** The workload is pretty small.  The nodes are still 98.8% free in terms of disk space and the database is only 880 MiB.
** p99 CockroachDB heartbeat latency peaked below 60ms.
** Mean RPC clock offset peaked around 550us.
** We can clearly see the rebalancing happen in the change in replicas per node.
** We do see some miscellaneous range operations from time to time (splits, adds, removes, merges).
** There's a jump in under-replicated ranges around 18:20Z.  I suspect what happened is that we brought up the fifth node, which caused CockroachDB to flip its default replication factor for system ranges from 3 to 5, and then immediately replicate those ranges.

Overall this feels very successful.  I believe this workload is mainly 1-byte reads and writes, so it's heavy on operations, but not heavy on data throughput.  The load is clearly not well distributed -- it's nearly all being handled by db1.

There was that big latency outlier at 18:47Z.  That's correlated with a spike in both splits and merges at that time.

=== Details

Note: I've updated the naming of the "db" hosts so that they're 1-based like the CockroachDB naming.  Hopefully, this means db3 == n3, etc.

I've tainted all six database servers and redeployed them so that I can start with a fresh cluster of only three nodes.  I've initialized the cluster and set it up to run the "kv" workload with:

[source,text]
----
cockroach workload init kv postgresql://root@192.168.1.223:26257/kv?sslmode=disable
----

Now running the workload with:

[source,text]
----
cockroach workload run kv --histograms kv-histograms-$(date +%FT%TZ).out --concurrency 4 --display-every=60s --read-percent 50 --tolerate-errors postgresql://root@192.168.1.223:26257/kv?sslmode=disable
----

Started that around 17:26Z.

Will shortly start two more, redirected at the other two nodes: 192.168.1.14 and 192.168.1.121.

17:34Z: started second one
17:36Z: started third one

I ran that third one against the wrong host.  Rerunning it at 17:39Z.

Want to wait until at least 17:50Z before doing anything real.  Next step: enable cockroachdb on db4.

18:05Z: bring up db4
18:19Z: bring up db5
19:54Z: bring up db6

=== Online contraction

Next, I'm going to try an online scale-down (contraction).  What's the order that I want to do this?  Obvious would be to remove db6, db5, and db4 -- there are no load generators running on them.  However, all the load is still pointed at db1.  Maybe it's worth removing that one.  How about: db6, db5, then verify the load is still on db1, then remove that one.  In order to do this experiment, though, I'll want to move the load generator that's currently pointed at db1 over to db4, so that it can be kept running the entire time.  (Otherwise, I can't really tell if latency or errors happened during the operation.)

[source,text]
----
20:54Z Shut down load generator against db1.
20:55Z Restart same load generator against db4 (192.168.1.85)
20:10Z Begin decommission n6.  Took about 40 seconds.
19:20Z Begin decommission n5.  Took 37 seconds.
19:30Z Begin decommission n1, after verifying its store is still taking all the load.  Took 91 seconds.
21:45Z Actually shut down nodes n6, n5, n1.
----

In terms of impact: there was little impact on throughput, latency, error rate (0), etc. from decommissioning nodes n6 and n5.  There was a small spike in p95 and p99 latency on all nodes around 21:11 (p95 spiked to 18ms from about 12ms, p99 spiked to about 35ms from about 18ms).  There was almost nothing at 21:20Z.  We do see the replicas and leaseholders moving, and some internal errors, but that's it.  p99 heartbeat latency peaked below 125ms.

There was a much more significant impact for decommissioning n1: p95 latency spiked to about 33ms on all nodes, with p99 spiking up to 60ms.  Throughput saw a similar (brief) crash.  Queries per second for store 1 crashed t0 zero, while QPS for stores 2 and 4 rose up.

As expected, there was no impact for the actual shutdown at 21:45Z.

Broadly: there was some brief, notable performance impact, but no errors, and performance never got that bad. (60ms p99 is still pretty decent.)

Final output from db1 load generator, for reference:

[source,text]
----
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
12060.2s        0          413.8          438.7      1.7      3.4      4.7     26.2 read
12060.2s        0          413.2          439.2      7.6     12.1     17.8     39.8 write
12120.2s        0          400.0          438.5      1.7      3.7      6.0     41.9 read
12120.2s        0          402.3          439.0      7.6     13.1     18.9    109.1 write
12180.2s        0          413.1          438.4      1.6      3.4      4.7     22.0 read
12180.2s        0          415.8          438.9      7.6     12.1     18.9     44.0 write
12240.2s        0          414.4          438.3      1.7      3.4      5.0     28.3 read
12240.2s        0          409.9          438.8      7.6     12.6     17.8     44.0 write
12300.2s        0          393.6          438.1      1.7      3.8      6.0     31.5 read
12300.2s        0          394.6          438.6      7.9     14.2     21.0     71.3 write
12360.2s        0          363.4          437.7      1.9      4.7      7.6     39.8 read
12360.2s        0          363.5          438.2      8.1     15.7     24.1     65.0 write
12420.2s        0          393.5          437.5      1.8      3.8      6.0     39.8 read
12420.2s        0          397.0          438.0      7.6     13.6     21.0     65.0 write
^CNumber of reads that didn't return any results: 3.
Highest sequence written: 5444392. Can be passed as --write-seq=R5444392 to the next run.

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
12430.4s        0        5437954          437.5      1.6      1.4      3.1      4.7   1543.5  read

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
12430.4s        0        5444392          438.0      7.6      7.3     12.6     18.9   1543.5  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
12430.4s        0       10882346          875.5      4.6      3.8     10.5     16.3   1543.5
----

Conclusions:

* These experiments both went well.  However, there are two caveats: the database was tiny (peaked just over 1 GiB, just 2 ranges for most of the day).  That means most of the load was concentrated in one machine at a time and replication of each range was pretty fast.  It's worth redoing these with a much larger database size.

Also today: compared my sysbench numbers to the ones posted in the https://www.cockroachlabs.com/docs/stable/performance.html#latency[CockroachDB docs].  They tested on a 3-node AWS cluster of `c5d.9xlarge` instances with much higher concurrency, so this isn't an apples-to-apples comparison.  They got an average latency of 4.3ms for oltp_insert and 0.7ms for oltp_point_select.  I tested on 3 c4 instances, much smaller, and got (looking at data from yesterday) 5.6ms for oltp_insert and 0.9ms for oltp_point_select.  That's in the right ballpark, at least.

=== Making a bigger database

As mentioned above, I want to rerun these tests with a bigger database -- ideally a few tens of GiB.  That'll ensure that load is well distributed across the nodes.  It will also make sure there's a bunch of stuff to replicate when adding or removing nodes.

To do this, I'm going to increase the "kv" workload batch size and record size.

Plan: 

* done: drop the "kv" database
* done: mark db1, db5, db6 as tainted and then `terraform apply` to redeploy them.
* done: For my own sanity, enable CockroachDB on db1, decommission db4, mark it tainted, and redeploy it too.  Now I'll be back to a 3-node cluster with db1, db2, and db3.  But this didn't do what I expected: of course, db1 came back as n7.  Oh well.

22:50Z: I'm now attempting to fill the database using three copies of this command, one running against each node:

[source,text]
----
cockroach workload run kv --concurrency 4 --display-every=60s --batch 1000 --max-block-bytes 1024 --min-block-bytes 1024 postgresql://root@192.168.1.121:26257/kv?sslmode=disable
----

This is write-only.  I'm going to let this run for a while to see how quickly it goes.  Ideally, once the database is reasonably large, I'd drop the batch size back to 1 and make it 50% reads.  This will simulate a basic read-write workload on a reasonably large database.

Immediately, the CPU utilization of both CPUs on db1 are maxed out.  (Note that it's called db1 here because that's what terraform calls it.  It's actually n7 in CockroachDB.)  I expect to see some splitting happen.  This probably would have happened automatically if I'd used to the right flags above, but this will be interesting to see happen.

Also interesting is that the p95 and p99 are both close to 15s, with throughput only 1-5 per second.  That's presumably because the batch size and data size are so large.  We did see a split early on, and that seems to have reduced disk %busy, but not CPU utilization on db1.

22:55Z: I'm going to change these to batch size 100 to make it a bit more manageable -- both observable, and probably better for CRDB.  (It's hard to make guesses about load when queries are that big.)

On the plus side, the database is already at 2.7 GiB.  This shouldn't take all that long.

23:13Z: I can see we're still maxed out on CPU, but we're still only doing up to 10 queries per second.  I wonder if CockroachDB just can't tell that.  I'm going to change the batch size to 10 and see what happens to the rate.  (At this rate, it'll take over 8 hours to reach 50% full.)  I do observe that the rate of decrease in capacity did go down (i.e., we were filling it more slowly) when I reduced the batch size from 1000 to 100, so it's possible this too will make it worse.

It finally split the range around 23:25Z and the CPU became much more balanced.

2020-09-23T03:43Z: I finally stopped the workload.  The table is now 35 GiB with 32 ranges, so that seems pretty good -- a few multiples of DRAM.  Last data points from load generators:

[source,text]
----
16080.3s        0           16.6           21.1    226.5    453.0    570.4    738.2 write
16140.3s        0           17.7           21.1    209.7    469.8    604.0    738.2 write

^CHighest sequence written: 3408050. Can be passed as --write-seq=R3408050 to the next run.

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
16169.1s        0         340805           21.1    189.7    167.8    402.7    570.4  11274.3  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
16169.1s        0         340805           21.1    189.7    167.8    402.7    570.4  11274.3

----


[source,text]
----
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
15660.3s        0           17.6           21.3    184.5    520.1    671.1    805.3 write
15720.3s        0           17.5           21.2    201.3    453.0    704.6   1040.2 write
15780.3s        0           16.9           21.2    226.5    486.5    637.5    838.9 write
15840.3s        0           16.9           21.2    209.7    503.3    704.6   1006.6 write
15900.3s        0            9.1           21.2    419.4    805.3   1040.2   1140.9 write
15960.3s        0           12.1           21.1    302.0    704.6    973.1   1476.4 write
16020.3s        0           18.6           21.1    201.3    419.4    604.0    704.6 write
16080.3s        0           16.8           21.1    226.5    453.0    604.0    805.3 write
16140.3s        0           17.8           21.1    201.3    486.5    604.0    805.3 write
^CHighest sequence written: 3409280. Can be passed as --write-seq=R3409280 to the next run.

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
16168.3s        0         340927           21.1    189.7    167.8    419.4    637.5  12884.9  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
16168.3s        0         340927           21.1    189.7    167.8    419.4    637.5  12884.9

----


[source,text]
----
_elapsed___errors__ops/sec(inst)___ops/sec(cum)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)
15660.3s        0           17.7           21.3    192.9    520.1    671.1    906.0 write
15720.3s        0           17.2           21.2    209.7    469.8    671.1    872.4 write
15780.3s        0           17.4           21.2    218.1    469.8    738.2   1040.2 write
15840.3s        0           16.6           21.2    218.1    503.3    738.2   1342.2 write
15900.3s        0            8.5           21.2    436.2    906.0   1140.9   1342.2 write
15960.3s        0           13.8           21.1    260.0    604.0    872.4   1342.2 write
16020.3s        0           18.2           21.1    209.7    419.4    604.0    872.4 write
16080.3s        0           16.5           21.1    226.5    486.5    671.1    973.1 write
16140.3s        0           17.6           21.1    192.9    503.3    604.0   1208.0 write
^CHighest sequence written: 3409410. Can be passed as --write-seq=R3409410 to the next run.

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__total
16164.9s        0         340941           21.1    189.6    159.4    436.2    637.5  12348.0  write

_elapsed___errors_____ops(total)___ops/sec(cum)__avg(ms)__p50(ms)__p95(ms)__p99(ms)_pMax(ms)__result
16164.9s        0         340941           21.1    189.6    159.4    436.2    637.5  12348.0
----

Here are the ranges and the leaseholder distribution of ranges:

[source,text]
----
root@192.168.1.121:26257/defaultdb> show ranges from database kv;
  table_name |       start_key       |        end_key        | range_id | range_size_mb | lease_holder | lease_holder_locality | replicas | replica_localities
-------------+-----------------------+-----------------------+----------+---------------+--------------+-----------------------+----------+---------------------
  kv         | NULL                  | /-8644906336239945703 |       55 |    390.805626 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /-8644906336239945703 | /-8069435259144101732 |       66 |    389.691597 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /-8069435259144101732 | /-7496722784489744891 |       63 |    387.804012 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /-7496722784489744891 | /-6917067466064761547 |       67 |    389.692066 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /-6917067466064761547 | /-6345214731536894017 |       61 |    387.901001 |            3 |                       | {2,3,7}  | {"","",""}
  kv         | /-6345214731536894017 | /-5768973510993151024 |       88 |    388.597722 |            3 |                       | {2,3,7}  | {"","",""}
  kv         | /-5768973510993151024 | /-5193738011353484949 |       85 |    388.533233 |            3 |                       | {2,3,7}  | {"","",""}
  kv         | /-5193738011353484949 | /-4617490555988151481 |       89 |    388.672154 |            3 |                       | {2,3,7}  | {"","",""}
  kv         | /-4617490555988151481 | /-4036745315811621515 |       58 |    391.854331 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /-4036745315811621515 | /-3452917408621695570 |       80 |    393.718129 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /-3452917408621695570 | /-2872759373245409765 |       77 |    391.686346 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /-2872759373245409765 | /-2289453959667452470 |       82 |    392.913568 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /-2289453959667452470 | /-1714384884657519217 |       75 |    387.967262 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /-1714384884657519217 | /-1139083832953030361 |       83 |    388.191021 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /-1139083832953030361 | /-566197846551287554  |       78 |    388.813476 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /-566197846551287554  | /12078714989006353    |       84 |    390.292272 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /12078714989006353    | /586892179000115549   |       56 |    387.762182 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /586892179000115549   | /1161385910102187330  |       68 |    389.766379 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /1161385910102187330  | /1734319184862864901  |       64 |    387.568861 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /1734319184862864901  | /2307300159150767034  |       69 |    387.097826 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /2307300159150767034  | /2876845921679339393  |       59 |    387.859396 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /2876845921679339393  | /3448510611752689972  |       70 |    389.075896 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /3448510611752689972  | /4030373006148413508  |       62 |    391.879301 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /4030373006148413508  | /4607975129262295186  |       65 |    390.736928 |            7 |                       | {2,3,7}  | {"","",""}
  kv         | /4607975129262295186  | /5191185650921251275  |       57 |    392.320298 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /5191185650921251275  | /5769855355138244213  |       79 |    391.159562 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /5769855355138244213  | /6349221757903677613  |       76 |    391.089277 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /6349221757903677613  | /6926818746854337714  |       81 |    390.233135 |            2 |                       | {2,3,7}  | {"","",""}
  kv         | /6926818746854337714  | /7495563559043730703  |       60 |     385.85205 |            3 |                       | {2,3,7}  | {"","",""}
  kv         | /7495563559043730703  | /8067630312680358853  |       90 |    387.064929 |            3 |                       | {2,3,7}  | {"","",""}
  kv         | /8067630312680358853  | /8645022156636441903  |       86 |    390.134479 |            3 |                       | {2,3,7}  | {"","",""}
  kv         | /8645022156636441903  | NULL                  |       87 |    390.868304 |            3 |                       | {2,3,7}  | {"","",""}
(32 rows)

Time: 107.598008ms

root@192.168.1.121:26257/defaultdb> select lease_holder,count(*) from [show ranges from database kv] group by lease_holder;
  lease_holder | count
---------------+--------
             7 |    12
             3 |     8
             2 |    12
(3 rows)
----

That's not bad.  Hopefully that'll still be true after a cold start overnight.

== 2020-09-23

Summary of the day:

* Shut down CRDB and took ZFS snapshots so that I could rollback the database state.
* Ran an extended read-write workload to settle into a new steady state (make any splits/merges happen).  Dug into various behavior (e.g., compactions).
* Run expansion experiment with new database.  This demonstrated a lot of pathologies that I didn't understand and got lost trying to dig into them.

Details:

* booted the three db VMs
* in all three db VMs: shutdown cockroachdb (stop method timed out)
* in all three db VMs: zfs snapshot
* in all three db VMs: start up cockroachdb again

Now, I want to start a reasonably heavy workload against all three.  I don't want to do so many writes that we're as swamped as when we built up the database.  I'll do this:

[source,text]
----
cockroach workload run kv --histograms kv-histograms-$(date +%FT%TZ).out --concurrency 4 --display-every=60s --read-percent 80 --tolerate-errors postgresql://root@192.168.1.223:26257/kv?sslmode=disable
----

This started around 14:10Z.  By 15:13Z, it's been fairly stable at about 800 reads / second and 200 writes / second, with p95 35ms and p99 just over 50ms.  The qps per store is reasonably well distributed, as is the qps by node.  Latencies match up between all three nodes.  There have been zero errors.  CPU utilization has been about 35-40% (and about the same for all six CPUs on the 3 db nodes).  Average I/O time ranges from about 3ms to 8ms on average.

That's all except for one excursion at 15:05 while I was debugging the system -- this may have been correlated with DTrace stopping one cockroach process to resolve stack traces?  That's the only thing I did that would cause a blip, but the blip affected all three nodes.  On the other hand, there was a big spike in average I/O time up to about 15ms on all nodes and a big spike in time queued in device driver on all nodes (up to about 5-6ms).  During this period, CPU utilization dipped on all nodes, but we did a bunch more total read throughput (spike from 40 MBps to 55 MBps.  Read IOPS actually went down.  Another thing I had done briefly around this time was `find /usr` -- I wonder if that could cause this, but only on one node.

I also note that there are small latency spikes every 5 minutes, and these appear correlated with big spikes in disk bytes written per second.  I wonder if ZFS is sync'ing fairly infrequently.

It's not that:

[source,text]
----
root@db1:~# dtrace -q -n 'BEGIN{ printf("tracing\n"); } spa_sync:entry,spa_sync:return{ printf("%Y %s:%s\n", walltimestamp, probefunc, probename); }'
tracing
2020 Sep 23 15:29:01 spa_sync:entry
2020 Sep 23 15:29:02 spa_sync:return
2020 Sep 23 15:29:06 spa_sync:entry
2020 Sep 23 15:29:07 spa_sync:return
2020 Sep 23 15:29:11 spa_sync:entry
2020 Sep 23 15:29:12 spa_sync:return
2020 Sep 23 15:29:16 spa_sync:entry
2020 Sep 23 15:29:17 spa_sync:return
2020 Sep 23 15:29:21 spa_sync:entry
2020 Sep 23 15:29:22 spa_sync:return
^C
----

I did spend some time digging into the system's performance, as the disks are nearly 100% busy.  Mostly I found that:

* Most of all disk I/Os are 128 KiB reads
* Most of the rest are small writes: 4096, then 8192, and other small multiples of 4096.
* Nearly all of the writes are coming from the taskq thread so it's a bit hard to see where they're really coming from.
* Cockroach is doing a fair number of `fdsync` calls to a file that I suspect is its WAL ("/cockroachdb/data/037460.log").
* The writes to that file vary in size from about 64 bytes to 4K, but they cluster around 512 bytes to 2K.

All of this seems pretty expected given:

* a workload whose write component involves small writes (<2 KiB writes)
* a system with no slog configured

I realized while writing this up that I did not specify the 1 KiB write size that I intended with the current workload.  However, that's kind of okay: I'm not doing perf testing here -- I just want there to be a substantial read/write load while I do these other experiments.

At 15:37Z there was another big event like the one mentioned above: crash in just about all metrics, spike in latency, and spike in bytes read from disk per second.  I was definitely not doing anything when this happened.  How can we capture this, plus the every-5-minute spikes?  Kind of want to trace volume of I/O by userland stack trace on a per-minute basis?

I'm going to take a break to get ready for the day.  When I resume:

* verify preconditions for the experiment
** qps per node distributed across all three nodes
** qps per store distributed across all three nodes
** %cpu, %busy, and disk IOPS and throughput are distributed across all three nodes
** throughput and latency are reasonably consistent

=== Every-5-minute latency spikes

See above for context.  These appear correlated with large increases in bytes written to disk (but not necessarily write IOPS).  It also seems correlated with compactions / flushes in Admin UI.

My tracing:

[source,text]
----
root@db1:~# dtrace -q -n 'BEGIN{ pcount = 0; }' -n 'fsinfo:::write/args[0]->fi_fs == "zfs"/{ @[execname, pid, probename, args[0]->fi_name, args[0]->fi_dirname] = sum(arg1); }' -n 'tick-1s/pcount++ % 60 == 0/{ printf("%Y\n", walltimestamp); printf("    %9s  %20s %-6s %-5s %s %s\n", "BYTES", "EXECNAME", "PID", "R/W", "FILE", "DIRECTORY"); trunc(@, 15); printa("    %@9d  %20s %-6d %-5s %s %s\n", @); trunc(@); }'
2020 Sep 23 17:58:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          266             cockroach 552    write MANIFEST-037248 /cockroachdb/data
          754             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
         1192             cockroach 552    write cockroach-pebble.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
        96616             cockroach 552    write 038260.log /cockroachdb/data
       471517             cockroach 552    write 038262.sst /cockroachdb/data
       476456             cockroach 552    write 038263.sst /cockroachdb/data
       518326             cockroach 552    write 038266.sst /cockroachdb/data
      1630429             cockroach 552    write 038261.sst /cockroachdb/data
      4248787             cockroach 552    write 038265.sst /cockroachdb/data
      4442674             cockroach 552    write 038264.sst /cockroachdb/data
2020 Sep 23 17:59:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
      3822300             cockroach 552    write 038278.sst /cockroachdb/data
      4229497             cockroach 552    write 038277.sst /cockroachdb/data
      4230425             cockroach 552    write 038280.sst /cockroachdb/data
      4231111             cockroach 552    write 038283.sst /cockroachdb/data
      4234233             cockroach 552    write 038274.sst /cockroachdb/data
      4235074             cockroach 552    write 038279.sst /cockroachdb/data
      4241833             cockroach 552    write 038282.sst /cockroachdb/data
      4245448             cockroach 552    write 038268.sst /cockroachdb/data
      4246357             cockroach 552    write 038276.sst /cockroachdb/data
      4248364             cockroach 552    write 038267.sst /cockroachdb/data
      4252136             cockroach 552    write 038275.sst /cockroachdb/data
      6412542             cockroach 552    write 038271.sst /cockroachdb/data
      8399522             cockroach 552    write 038272.sst /cockroachdb/data
      8410169             cockroach 552    write 038270.sst /cockroachdb/data
      8960741             cockroach 552    write 038260.log /cockroachdb/data
2020 Sep 23 18:00:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5634             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9144370             cockroach 552    write 038260.log /cockroachdb/data
2020 Sep 23 18:01:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5902             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9187226             cockroach 552    write 038260.log /cockroachdb/data
2020 Sep 23 18:02:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5634             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
       229825             cockroach 552    write memprof.000000000185769104_2020-09-23T18_02_16.235 /cockroachdb/data/logs/heap_profiler
      9012342             cockroach 552    write 038260.log /cockroachdb/data
2020 Sep 23 18:03:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          130               syslogd 454    write messages /var/adm
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5635             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9236271             cockroach 552    write 038260.log /cockroachdb/data
2020 Sep 23 18:04:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          395             cockroach 552    write cockroach-pebble.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5904             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
        35236             cockroach 552    write 038285.log /cockroachdb/data
      1357749             cockroach 552    write 038286.sst /cockroachdb/data
      9006463             cockroach 552    write 038260.log /cockroachdb/data
2020 Sep 23 18:05:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
      4232742             cockroach 552    write 038305.sst /cockroachdb/data
      4232877             cockroach 552    write 038295.sst /cockroachdb/data
      4234729             cockroach 552    write 038299.sst /cockroachdb/data
      4235717             cockroach 552    write 038301.sst /cockroachdb/data
      4241627             cockroach 552    write 038291.sst /cockroachdb/data
      4241918             cockroach 552    write 038304.sst /cockroachdb/data
      4244596             cockroach 552    write 038297.sst /cockroachdb/data
      4249726             cockroach 552    write 038296.sst /cockroachdb/data
      4250267             cockroach 552    write 038292.sst /cockroachdb/data
      4250663             cockroach 552    write 038290.sst /cockroachdb/data
      4251812             cockroach 552    write 038293.sst /cockroachdb/data
      4545094             cockroach 552    write 038289.sst /cockroachdb/data
      8406244             cockroach 552    write 038307.sst /cockroachdb/data
      8407968             cockroach 552    write 038308.sst /cockroachdb/data
      9071976             cockroach 552    write 038285.log /cockroachdb/data
2020 Sep 23 18:06:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         9147             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9111146             cockroach 552    write 038285.log /cockroachdb/data
2020 Sep 23 18:07:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5633             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9131271             cockroach 552    write 038285.log /cockroachdb/data
2020 Sep 23 18:08:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5633             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9109181             cockroach 552    write 038285.log /cockroachdb/data
2020 Sep 23 18:09:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5902             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9174892             cockroach 552    write 038285.log /cockroachdb/data
2020 Sep 23 18:10:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5634             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9092377             cockroach 552    write 038285.log /cockroachdb/data
2020 Sep 23 18:11:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
      3735505             cockroach 552    write 038327.sst /cockroachdb/data
      4230352             cockroach 552    write 038329.sst /cockroachdb/data
      4230802             cockroach 552    write 038326.sst /cockroachdb/data
      4232601             cockroach 552    write 038319.sst /cockroachdb/data
      4235221             cockroach 552    write 038315.sst /cockroachdb/data
      4235270             cockroach 552    write 038323.sst /cockroachdb/data
      4240725             cockroach 552    write 038324.sst /cockroachdb/data
      4242037             cockroach 552    write 038320.sst /cockroachdb/data
      4242169             cockroach 552    write 038328.sst /cockroachdb/data
      4245301             cockroach 552    write 038321.sst /cockroachdb/data
      4246048             cockroach 552    write 038317.sst /cockroachdb/data
      4250534             cockroach 552    write 038314.sst /cockroachdb/data
      4258931             cockroach 552    write 038316.sst /cockroachdb/data
      4638051             cockroach 552    write 038313.sst /cockroachdb/data
      9205484             cockroach 552    write 038309.log /cockroachdb/data
2020 Sep 23 18:12:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5634             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9191817             cockroach 552    write 038309.log /cockroachdb/data
2020 Sep 23 18:13:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5632             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9156597             cockroach 552    write 038309.log /cockroachdb/data
2020 Sep 23 18:14:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5903             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      8968980             cockroach 552    write 038309.log /cockroachdb/data
2020 Sep 23 18:15:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5634             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      9117409             cockroach 552    write 038309.log /cockroachdb/data
2020 Sep 23 18:16:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          129             cockroach 552    write cockroach-pebble.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         7957             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
        24868             cockroach 552    write 038331.log /cockroachdb/data
      1240865             cockroach 552    write 038332.sst /cockroachdb/data
      9130242             cockroach 552    write 038309.log /cockroachdb/data
2020 Sep 23 18:17:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
      4240976             cockroach 552    write 038338.sst /cockroachdb/data
      4241661             cockroach 552    write 038345.sst /cockroachdb/data
      4241681             cockroach 552    write 038350.sst /cockroachdb/data
      4242437             cockroach 552    write 038353.sst /cockroachdb/data
      4245858             cockroach 552    write 038340.sst /cockroachdb/data
      4250058             cockroach 552    write 038337.sst /cockroachdb/data
      4252294             cockroach 552    write 038339.sst /cockroachdb/data
      4256064             cockroach 552    write 038344.sst /cockroachdb/data
      4625014             cockroach 552    write 038359.sst /cockroachdb/data
      4712037             cockroach 552    write 038336.sst /cockroachdb/data
      8758259             cockroach 552    write 038331.log /cockroachdb/data
      8954597             cockroach 552    write 038348.sst /cockroachdb/data
     16784652             cockroach 552    write 038358.sst /cockroachdb/data
     16789817             cockroach 552    write 038357.sst /cockroachdb/data
     20172971             cockroach 552    write 038360.sst /cockroachdb/data
2020 Sep 23 18:18:17
        BYTES              EXECNAME PID    R/W   FILE DIRECTORY
          822      illumos-exporter 426    write application-illumos-exporter:default.log /var/svc/log
         5905             cockroach 552    write cockroach.db1.cockroachdb.2020-09-23T14_05_45Z.000552.log /cockroachdb/data/logs
      8998121             cockroach 552    write 038331.log /cockroachdb/data

----

Summary of spikes in write I/O from my tracing:

[source,text]
----
17:58 - 17:59
18:05
18:11
18:17
----

Summary of spikes in compactions **on n7** (db1):

[source,text]
----
17:58:30
18:04:30
18:10:30
18:16:30
----

Summary of spikes in disk bytes written:

[source,text]
----
17:58:30
18:04:30
18:10:30
18:16:30
----

My tracing shows spikes in bytes written to the sst files at the same time as spikes in bytes written to disk, at the same time as compactions/flushes.  Tracing where these are coming from:

[source,text]
----
root@db1:~# dtrace -q -n 'BEGIN{ pcount = 0; }' -n 'fsinfo:::write/args[0]->fi_fs == "zfs" && execname == "cockroach" && args[0]->fi_dirname == "/cockroachdb/data"/{ @[args[0]->fi_name, ustack()] = sum(arg1); }' -n 'tick-1s/pcount++ % 10 == 0/{ printf("%Y\n", walltimestamp); printa(@); trunc(@); }'
2020 Sep 23 18:30:00

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
             1300
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
            98598
2020 Sep 23 18:30:10

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           466606
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1001777
2020 Sep 23 18:30:20

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           490221
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1085940
2020 Sep 23 18:30:30

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           545091
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1011152
2020 Sep 23 18:30:40

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           499791
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           958154
2020 Sep 23 18:30:50

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           510696
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1068227
2020 Sep 23 18:31:00

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           505482
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1045419
2020 Sep 23 18:31:10

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           523152
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           963423
2020 Sep 23 18:31:20

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           570946
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           981128
2020 Sep 23 18:31:30

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           543966
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           970835
2020 Sep 23 18:31:40

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           504532
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1031607
2020 Sep 23 18:31:50

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           541405
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1005244
2020 Sep 23 18:32:00

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           484510
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1019241
2020 Sep 23 18:32:10

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           465532
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           928871
2020 Sep 23 18:32:20

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           540366
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           865638
2020 Sep 23 18:32:30

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           506049
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           776038
2020 Sep 23 18:32:40

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           549427
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           975391
2020 Sep 23 18:32:50

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           490999
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1034167
2020 Sep 23 18:33:00

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           525451
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1039681
2020 Sep 23 18:33:10

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           489763
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1026542
2020 Sep 23 18:33:20

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           509978
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           969318
2020 Sep 23 18:33:30

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           585123
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           954583
2020 Sep 23 18:33:40

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           570240
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1041078
2020 Sep 23 18:33:50

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           522892
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           978804
2020 Sep 23 18:34:00

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           502441
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1091489
2020 Sep 23 18:34:10

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           504292
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
          1041930
2020 Sep 23 18:34:20

  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           544372
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           980280
2020 Sep 23 18:34:30

  038415.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              162
  038407.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
              248
  MANIFEST-037248
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*Writer).writePending+0x98
              cockroach`github.com/cockroachdb/pebble/internal/record.(*Writer).Flush+0x33
              cockroach`github.com/cockroachdb/pebble.(*versionSet).logAndApply.func1+0x2dc
              cockroach`github.com/cockroachdb/pebble.(*versionSet).logAndApply+0x19f
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x745
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
              265
  038425.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              885
  038416.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              889
  038424.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              933
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              941
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              941
  038433.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              941
  038428.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              942
  038429.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              942
  038413.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
              967
  038411.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1026
  038419.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1129
  038420.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1137
  038418.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1144
  038426.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1151
  038421.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1152
  038417.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1189
  038414.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1198
  038412.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1279
  038423.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             1317
  038409.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             1372
  038408.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             1567
  038427.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             2034
  MANIFEST-037248
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*Writer).writePending+0x98
              cockroach`github.com/cockroachdb/pebble/internal/record.(*Writer).Flush+0x33
              cockroach`github.com/cockroachdb/pebble.(*versionSet).logAndApply.func1+0x2dc
              cockroach`github.com/cockroachdb/pebble.(*versionSet).logAndApply+0x19f
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x6aa
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             2278
  038410.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             2516
  038430.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             3359
  038422.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xa64
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             3703
  038407.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x50d
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             4096
  038407.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             4096
  038407.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             4096
  038408.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             4096
  038408.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             4096
  038409.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             4096
  038410.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038410.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038410.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038411.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038411.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038411.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038412.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038412.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038412.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038413.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038413.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038413.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038414.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038414.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038415.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x50d
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038415.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038415.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038416.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x50d
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038416.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038416.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038417.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038417.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038417.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038418.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038418.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038418.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038419.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038419.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038419.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038420.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038420.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038420.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038421.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038421.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038422.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038423.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038423.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038423.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038424.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x50d
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038424.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038424.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038425.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x50d
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038425.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038425.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038426.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038426.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038426.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038428.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038428.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038428.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038429.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038429.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038429.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038430.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038430.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038430.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038433.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038433.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038433.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4096
  038429.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4370
  038428.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4416
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             4582
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             5322
  038408.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             5450
  038409.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             5852
  038411.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             5886
  038423.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             6027
  038420.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             6664
  038408.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
             8243
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             8394
  038433.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             8615
  038418.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             9751
  038430.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             9930
  038413.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
             9995
  038426.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            10318
  038424.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            13032
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            13086
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            13658
  038419.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            13660
  038433.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xee3
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            15058
  038410.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            16509
  038430.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            18124
  038422.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            20480
  038417.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            20711
  038416.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            21191
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            21645
  038425.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            21829
  038407.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
            22258
  038428.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            22413
  038415.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            23269
  038429.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            25031
  038415.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            26826
  038422.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0xdb
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            28639
  038425.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            30666
  038419.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            37066
  038421.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            37530
  038416.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            40522
  038411.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            42570
  038424.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            43466
  038426.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            45258
  038423.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            45898
  038418.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            49098
  038409.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
            49152
  038413.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            50634
  038420.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            50890
  038417.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            55370
  038412.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            56114
  038414.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
            56236
  038408.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
            77824
  038407.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
           125002
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           154665
  038410.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Close+0x102a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction.func4+0x28a
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x1543
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           157386
  038422.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           174681
  038382.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           179186
  038434.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           196608
  038409.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
           309693
  038406.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushBlock+0x77
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x9d
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           316394
  038415.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           405504
  038407.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
           454656
  038408.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
           474650
  038425.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           520192
  038416.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           524288
  038419.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           532480
  038421.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           532480
  038424.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           532480
  038411.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           544768
  038420.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           548864
  038426.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           548864
  038423.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           552960
  038413.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           557056
  038414.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           561152
  038417.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           561152
  038418.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           561152
  038412.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           573440
  038406.log
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushPending+0x215
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop+0x2a1
              cockroach`github.com/cockroachdb/pebble/internal/record.(*LogWriter).flushLoop-fm+0x3e
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble/internal/record.NewLogWriter.func2+0x89
              cockroach`runtime.goexit+0x1
           701532
  038410.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           765952
  038430.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
           815104
  038428.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          1056768
  038429.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          1056768
  038434.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          1404625
  038407.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).flush1+0x2af
              cockroach`github.com/cockroachdb/pebble.(*DB).flush.func1+0x77
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).flush+0x89
              cockroach`runtime.goexit+0x1
          1412090
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          2117632
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          2134016
  038433.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Flush+0x75
              cockroach`bufio.(*Writer).Write+0xfa
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          2150400
  038415.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          2844576
  038410.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3396339
  038417.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3602903
  038412.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3610970
  038418.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3611794
  038413.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3617925
  038414.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3624025
  038426.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3625666
  038423.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3626298
  038420.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3629305
  038411.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3634334
  038419.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3636229
  038424.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3639580
  038416.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3639688
  038425.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3644066
  038421.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          3654822
  038430.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          5632396
  038429.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          7315395
  038428.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
          7315856
  038433.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
         14586547
  038432.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
         14612799
  038431.sst
              libc.so.1`__write+0xa
              cockroach`runtime.asmsysvicall6+0x5a
              cockroach`syscall.write+0x90
              cockroach`internal/poll.(*FD).Write+0x179
              cockroach`os.(*File).Write+0x77
              cockroach`github.com/cockroachdb/pebble/vfs.(*syncingFile).Write+0x64
              cockroach`bufio.(*Writer).Write+0x13b
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).writeBlock+0x144
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).maybeFlush+0xde
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).addPoint+0xa8
              cockroach`github.com/cockroachdb/pebble/sstable.(*Writer).Add+0x114
              cockroach`github.com/cockroachdb/pebble.(*DB).runCompaction+0x13ed
              cockroach`github.com/cockroachdb/pebble.(*DB).compact1+0x1ad
              cockroach`github.com/cockroachdb/pebble.(*DB).compact.func1+0x8b
              cockroach`runtime/pprof.Do+0xcc
              cockroach`github.com/cockroachdb/pebble.(*DB).compact+0xa2
              cockroach`runtime.goexit+0x1
         14613595

----

I kept all the data for context, but we can ignore the writes to the log files for now.  The writes to all the sst files at "2020 Sep 23 18:34:00" correlate with a compaction+flush, and they're coming from `flushLoop`.  I think that's as far as I want to go with this right now.

=== Online expansion experiment

Verifying preconditions:

* qps per node distributed across all three nodes
* qps per store distributed across all three nodes
* %cpu, %busy, and disk IOPS and throughput are distributed across all three nodes
* throughput and latency are reasonably consistent

[source,text]
----
19:55Z boot the remaining three database VMs
20:02Z verified above preconditions.  Of note, db3's %busy is quite high and its average I/O latency is like 3x higher than the others.  It's reading more bytes per second, though.  Maybe that's why?  I will check ranges.  They're pretty balanced:

    root@loadgen0:~# cockroach sql --host 192.168.1.24 --execute 'select lease_holder, count(*) from [show ranges from database kv] group by lease_holder'
      lease_holder | count
    ---------------+--------
                 7 |    11
                 3 |    11
                 2 |    10
    (3 rows)
    
    Time: 112.547288ms

       Of course it's possible that one of those is particularly busy right now for some reason.  This started around 18:34Z.  I'm not sure what else that correlates with.  I'm going to proceed anyway.
20:15Z start cockroachdb on db4 (became n8).  This didn't go that well.
20:25Z ranges aren't what I expect

    root@loadgen0:~# cockroach sql --host 192.168.1.24 --execute 'select lease_holder, count(*) from [show ranges from database kv] group by lease_holder'
      lease_holder | count
    ---------------+--------
                 2 |    14
                 3 |     9
                 8 |     9
    (3 rows)
    
    Time: 1.951390717s

      Where's node 7?  Ironically, store 7 is getting all the load right now.  Did it go suspect?  No -- the live node count never went down.  Also, the queries per second by store is supposed to be a moving average -- how does it have such a sharp increase?

20:29Z ranges more reasonable now

      root@loadgen0:~# cockroach sql --host 192.168.1.24 --execute 'select lease_holder, count(*) from [show ranges from database kv] group by lease_holder'
        lease_holder | count
      ---------------+--------
                   8 |    12
                   2 |     9
                   7 |     6
                   3 |     5
      (4 rows)
      
      Time: 396.930654ms

However, p95/p99 and throughput have not even come close to what they were before.  Previously about 925 total qps, now about 450.  CPU utilization fluctuated a lot, and is now quite unsteady, but plenty of headroom there.  A number of hosts are now frequently hitting 100% busy on the disks.  Average I/O time is also a lot higher.  They're all doing a lot more bytes written than they were before this.  Bytes read -- not so much, and actually fewer write IOPS.  The p99 RTT hit 3.6s on some hosts.

20:33Z Performance remains very uneven.  On the plus side, I haven't seen any actual errors up to this point.

20:33Z The erratic behavior appears to stabilize.  Performance is still poor, but getting steadily better.  That's about the point where replicas per node evened out across the cluster and leaseholders per node stopped changing too.  This is when we stopped with range operations.

20:48Z After just over half an hour, we've reached about the same performance we had before expanding the cluster.  Note that queries served per node has been about the same (across nodes, not over time) the whole time.  By 21:04Z, the cluster is doing about 1400 qps -- quite a bit more than the 950 it was doing before.  It's starting to level off.

----

To summarize the impact, I would say that there were a few periods of note:

[source,text]
----
20:15Z to 20:20Z: throughput dropped all the way to zero
20:20Z to 20:33Z: throughput poor and very erratic
20:33Z to 20:48Z: throughput climbing steadily, but less than before
20:48Z to 21:02Z: throughput climbing steadily, and better than before
21:02Z and after: throughput mostly steady, except for some big crashes at 21:08Z, 21:12, 21:14, 21:24, 21:34, and 21:52.
----

I'm very confused about some of the performance during this period.  Let's take a look at about 20:36Z.  At this point, db3's disk is seeing an average latency of 24ms and declining to about 10ms over the next 20 minutes or so.  That's way more than the https://aws.amazon.com/ebs/faqs/["single-digit millisecond latencies"] that Amazon says.  Is it a problem on our side?  I don't think so: the EC2 graphs of average read and write latency show similar shapes during this period, and also peaking around 20-25ms and declining to 10-15ms.  Why is it higher than before?  The queue length has also gone up -- in fact, the latency graph basically tracks the queue length graph pretty well.

Another thing that's strange about this: read throughput was steadily about 1,000 IOPS for a while, with write throughput about 100 IOPS.  But these volumes are provisioned with 500 IOPS.  What gives?

EBS/CloudWatch references:
* https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using_cloudwatch_ebs.html#ebs-volume-metrics[metric descriptions]
* https://aws.amazon.com/ebs/faqs/[EBS performance expectations]

Regarding the big crashes in throughput: these correlate with spikes of disk activity to 100% busy on db2 and db1, plus spikes in average I/O time on those hosts at those times.  These correlate with _crashes_ in write IOPS and spikes in read IOPS.  There are drops in CPU usage and network throughput.  I don't see any range operations during this time, nor internal CockroachDB errors, nor significant heartbeat latency.  These _are_ correlated with active flows for distributed SQL queries.  I did not find much else in the Cockroach Admin UI to explain this.  There were no additional SQL connections to the nodes, so it's not clear why some queries would be suddenly so expensive.

This all feels like a big mess.  Here are a bunch of open questions.  At the top level:

* Why the crash in performance for 5 full minutes?
* Why the erratic performance while rebalancing?
* Why the slow ramp-up in performance afterwards?
* Why did performance wind up better than it was before?
* Why the occasional crashes after the fact?

Lower level questions related to these:

* Why the sudden skyrocket in queries per second served by store 7 right after 8 came online?  How is that even possible -- it's way more queries than we were doing?  And there were no ranges at all on 7 for a few minutes there?  Why was that?
* Why is the AWS disk latency so high sometimes?  (Seems to track with queue depth, so maybe that's enough explanation?)
* Why are I/Os queued in the driver for so long?  Is that because we'd reached at max at the disk?
* Why was db3 so busy before the expansion at 20:15Z?
* Why did the heartbeat latency spike so much during that period?  Ditto RTT outliers (but not p50 RTT)?  Did things have trouble getting on-CPU?

Some things to check:

* Recommended hardware configurations
** wrong: 4 GiB DRAM per vCPU (we only have <4 GiB total for 2 vCPUs)
** wrong: 60 GiB storage per vCPU (but we're not using all that)
** wrong: 500 IOPS per vCPU (we have 500 IOPS for both vCPUs)
** okay: 30 MBps disk I/O per vCPU (we have plenty)
* Note: we're running a "master" build, using Pebble, on an unsupported OS

23:09Z: updated instance types of db nodes to "c4.xlarge" and bumped up to 1000 provisioned IOPS.  That's not right though because we bumped the vCPU count as well.  Sigh.  We really want: 2 vCPUs, 8 GiB of memory, and 1000 IOPS.  We just want more memory than we had.  Maybe I want m4.large?

23:23Z: updated instance types of db nodes to "m4.large".

NOTE: when changing the instance type, the Instances are rebooted!

Next steps:

* Retry the experiment with bigger hardware?  Make sure next time we're not starting at 100% busy disks?
* Add some sort of tracing to identify cases where a Goroutine (or thread) has been off-CPU for a lot longer than we'd expect?  Maybe trace wakeup stacks when a thread has been off-CPU for over 1s?
